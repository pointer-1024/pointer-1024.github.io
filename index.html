<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-21天学通C-学习笔记" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/12/22/21%E5%A4%A9%E5%AD%A6%E9%80%9AC-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="article-date">
  <time class="dt-published" datetime="2024-12-22T11:50:21.000Z" itemprop="datePublished">2024-12-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/12/22/21%E5%A4%A9%E5%AD%A6%E9%80%9AC-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">21天学通C++学习笔记</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h1 id="第一章"><a href="#第一章" class="headerlink" title="第一章"></a>第一章</h1><h2 id="1-6-作业"><a href="#1-6-作业" class="headerlink" title="1.6 作业"></a>1.6 作业</h2><p><strong>1.6.1 测试</strong></p>
<ol>
<li><p><strong>解释器和编译器有什么不同？</strong></p>
<p><strong>答</strong>：解释器是一种对代码（或字节码）进行解释并执行相应的工具；编译器将代码作为输入，并生成目标文件。就C++而言，编译和链接后，将得到一个可执行文件，处理器可直接执行它，而无需做进一步解释。</p>
</li>
<li><p><strong>链接器的作用是什么？</strong></p>
<p><strong>答</strong>：链接器的作用是将多个目标文件（<code>.o</code> 或 <code>.obj</code>）和库文件组合在一起，生成一个可执行文件或库。</p>
</li>
<li><p><strong>正常的开发周期包括哪些步骤？</strong></p>
<p><strong>答</strong>：</p>
<p><strong>需求分析</strong>：明确项目目标、用户需求和功能要求。<br>​<strong>系统设计</strong>：设计架构、模块和数据库结构。<br><strong>开发实现</strong>：编写代码，完成各功能模块。<br><strong>测试</strong>：进行单元测试、集成测试、功能测试等，确保质量。<br><strong>部署上线</strong>：将产品部署到目标环境并上线运行。<br><strong>维护与迭代</strong>：修复问题、优化功能、发布新版本。</p>
</li>
</ol>
<p><strong>1.6.2 练习</strong></p>
<ol>
<li><strong>阅读下面的程序，在不运行它的情况下猜测其功能</strong></li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> x = <span class="number">8</span>;</span><br><span class="line">    <span class="type">int</span> y = <span class="number">6</span>;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; x - y &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; x * y &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; x + y &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​	**答:**输出x与y加、乘和减三个计算结果</p>
<ol start="2">
<li><strong>输入练习1中的程序，然后编译并链接它。它做什么？与您的猜测相符吗？</strong></li>
<li><strong>下面的程序存在什么样的错误？</strong></li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">include&lt;iostream&gt;</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Hello Buggy World \n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​	<strong>答</strong>:没有在include前加上#</p>
<p>4.<strong>修复练习3中的程序的错误，重新编译、链接并运行它。它做什么？</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Hello Buggy World \n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;	</span><br></pre></td></tr></table></figure>

<p>​	<strong>答</strong>:输出Hello Buggy World\n</p>
<h1 id="第二章"><a href="#第二章" class="headerlink" title="第二章"></a>第二章</h1><h2 id="2-4-C-函数"><a href="#2-4-C-函数" class="headerlink" title="2.4 C++函数"></a>2.4 C++函数</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单2.4 声明、定义和调用函数，该函数演示了std::cout的功能</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">DemoConsoleOutput</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">DemoConsoleOutput</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">DemoConsoleOutput</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;This is a simple string literal&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Writing number five:&quot;</span> &lt;&lt; <span class="number">5</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Performing division 10 / 5= &quot;</span> &lt;&lt; <span class="number">10</span>/<span class="number">5</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Pi when approximated is 22 / 7 = &quot;</span> &lt;&lt; <span class="number">22</span> / <span class="number">7</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Pi is 22 / 7 = &quot;</span> &lt;&lt; <span class="number">22.0</span> / <span class="number">7</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单2.5 使用函数的返回值</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">DemoConsoleOutput</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">DemoConsoleOutput</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">DemoConsoleOutput</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;This is a simple string literal&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Writing number five:&quot;</span> &lt;&lt; <span class="number">5</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Performing division 10 / 5= &quot;</span> &lt;&lt; <span class="number">10</span>/<span class="number">5</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Pi when approximated is 22 / 7 = &quot;</span> &lt;&lt; <span class="number">22</span> / <span class="number">7</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Pi is 22 / 7 = &quot;</span> &lt;&lt; <span class="number">22.0</span> / <span class="number">7</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-5-使用std-cin和std-cout执行基本输入输出操作"><a href="#2-5-使用std-cin和std-cout执行基本输入输出操作" class="headerlink" title="2.5 使用std::cin和std::cout执行基本输入输出操作"></a>2.5 使用std::cin和std::cout执行基本输入输出操作</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单2.6 使用cin和cout显示用户的数字输入和文本输出</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> inputNumber;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter an integer:&quot;</span>;</span><br><span class="line"></span><br><span class="line">	cin &gt;&gt; inputNumber;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter your name:&quot;</span>;</span><br><span class="line">	string inputName;</span><br><span class="line">	cin &gt;&gt; inputName;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; inputName &lt;&lt; <span class="string">&quot; entered &quot;</span> &lt;&lt; inputNumber &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-8作业"><a href="#2-8作业" class="headerlink" title="2.8作业"></a>2.8作业</h2><p><strong>2.8.1 测验</strong></p>
<ol>
<li><strong>声明Int main()有何问题？</strong></li>
</ol>
<p>​		<strong>答</strong>：1.Int不是数据类型关键字不能用作返回值 </p>
<pre><code>            2.main函数只能有一个，不能重载
</code></pre>
<ol start="2">
<li><p><strong>注释可以超过一行吗？</strong></p>
<p><strong>答</strong>：可以。使用&#x2F;**&#x2F;多行注释或使用预编译指令</p>
</li>
</ol>
<p><strong>2.8.2 练习</strong></p>
<ol>
<li><p><strong>查错：输入下面的程序并编译它。为什么不能通过编译？如何修复？</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::Cout &lt;&lt; Is there a bug here<span class="string">&quot;;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>答</strong>：1.输出对象书写错误，应改为cout</p>
<p>​		2.字符串字面值常量的双引号不全，应改为“Is there a bug here”</p>
</li>
<li><p><strong>修复练习1中的错误，然后重新编译、链接并运行它。</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Is there a bug here&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>修改程序清单2.4，以演示减法和乘法</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int DemoConsoleOutput();</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	DemoConsoleOutput();</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int DemoConsoleOutput()</span><br><span class="line">&#123;</span><br><span class="line">	cout &lt;&lt; &quot;This is a simple string literal&quot; &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; &quot;Writing number five:&quot; &lt;&lt; 5 &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; &quot;Performing subtraction 10 - 5= &quot; &lt;&lt; 10 - 5 &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; &quot;Pi when approximated is 22 * 7 = &quot; &lt;&lt; 22 * 7 &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; &quot;Pi is 22 * 7 = &quot; &lt;&lt; 22.0 * 7 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="第三章"><a href="#第三章" class="headerlink" title="第三章"></a>第三章</h1><h2 id="3-1-什么是变量"><a href="#3-1-什么是变量" class="headerlink" title="3.1 什么是变量"></a>3.1 什么是变量</h2><p><strong>3.1.2声明和访问变量</strong></p>
<ol>
<li><p>变量的定义</p>
<ul>
<li>VariableType VariableName;</li>
<li>VariableType VariableName &#x3D; InitialValue;</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//3.1 程序清单使用变量存储数字及其相乘结果</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;This program will help you multiply tow numbers&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter the first number:&quot;</span>;</span><br><span class="line">	<span class="type">int</span> firstNumber;</span><br><span class="line">	cin &gt;&gt; firstNumber;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter the second number:&quot;</span>;</span><br><span class="line">	<span class="type">int</span> secondNumber;</span><br><span class="line">	cin &gt;&gt; secondNumber;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> multiplicationResult = firstNumber * secondNumber;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; firstNumber &lt;&lt; <span class="string">&quot; x &quot;</span> &lt;&lt; secondNumber &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; multiplicationResult &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3.1.5 全局变量</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单3.3 使用全局变量</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> firstNumber = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> secondNumber = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> multiplicationResult = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MultiplyNumbers</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter the first number:&quot;</span>;</span><br><span class="line"></span><br><span class="line">	cin &gt;&gt; firstNumber;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter the second number:&quot;</span>;</span><br><span class="line">	cin &gt;&gt; secondNumber;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; firstNumber &lt;&lt; <span class="string">&quot; x &quot;</span> &lt;&lt; secondNumber &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; multiplicationResult &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;This program will help you multiply tow numbers&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">MultiplyNumbers</span>();</span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;DisplayNumbers()&quot;</span>;</span><br><span class="line">	cout &lt;&lt; firstNumber &lt;&lt; <span class="string">&quot; x &quot;</span> &lt;&lt; secondNumber &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; multiplicationResult &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3.1.6 命名约定</strong></p>
<ol>
<li>Pascal拼写法：每个单词首字母大写</li>
<li>驼峰拼写法：第一个单词的首字母小写，后面单词首字母大写</li>
<li>匈牙利表示法：在变量名开头包含指出变量类型的字符</li>
<li>下划线拼写法：每一个单词用下划线隔开</li>
</ol>
</li>
</ol>
<h2 id="3-2-编译器支持的常见C-变量类型"><a href="#3-2-编译器支持的常见C-变量类型" class="headerlink" title="3.2 编译器支持的常见C++变量类型"></a>3.2 编译器支持的常见C++变量类型</h2><p><strong>3.2.6 选择正确的数据类型以避免发生溢出错误</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单3.4 演示有符号整型变量和无符号中心变量溢出的负面影响</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">unsigned</span> <span class="type">short</span> uShortValue = <span class="number">65535</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Incrememting unsigned short &quot;</span> &lt;&lt; uShortValue &lt;&lt; <span class="string">&quot;gives: &quot;</span>;</span><br><span class="line">	cout &lt;&lt; ++uShortValue &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="type">short</span> signedShort = <span class="number">32767</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Incrememting signed short &quot;</span> &lt;&lt; signedShort &lt;&lt; <span class="string">&quot;gives：&quot;</span>;</span><br><span class="line">	cout &lt;&lt; ++signedShort &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-3-使用sizeof确定变量长度"><a href="#3-3-使用sizeof确定变量长度" class="headerlink" title="3.3 使用sizeof确定变量长度"></a>3.3 使用sizeof确定变量长度</h2><p><strong>3.3.1 使用列表初始化避免缩窄转换错误</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> largeNum = <span class="number">5000000</span>;</span><br><span class="line"><span class="type">short</span> anotherNum&#123; largeNum &#125;; <span class="comment">//error! Amend types</span></span><br><span class="line"><span class="type">int</span> anoterNUm&#123; largeNum &#125;; <span class="comment">//OK</span></span><br><span class="line"><span class="type">float</span> someFloat&#123; largeNum &#125;; <span class="comment">//error! An int may be narrowed</span></span><br><span class="line"><span class="type">float</span> someFloat&#123; <span class="number">5000000</span> &#125;; <span class="comment">//OK! 5000000 can be accomodated</span></span><br></pre></td></tr></table></figure>

<h2 id="3-4使用auto自动推导类型"><a href="#3-4使用auto自动推导类型" class="headerlink" title="3.4使用auto自动推导类型"></a>3.4使用auto自动推导类型</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单3.6 使用关键字auto依靠编译器的类型推导功能</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">auto</span> coinFlippedHeads = <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">auto</span> largeNumber = <span class="number">2500000000000</span>;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;coinFlippedHeads = &quot;</span> &lt;&lt; coinFlippedHeads;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot; , sizeof(coinFlippedHeads) = &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(coinFlippedHeads) &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; <span class="built_in">typeid</span>(coinFlippedHeads).<span class="built_in">name</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;largeNumber = &quot;</span> &lt;&lt; largeNumber;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot; , sizeof(largeNumber) = &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(largeNumber) &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; <span class="built_in">typeid</span>(largeNumber).<span class="built_in">name</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-6-什么是常量"><a href="#3-6-什么是常量" class="headerlink" title="3.6 什么是常量"></a>3.6 什么是常量</h2><p><strong>c++中的常量</strong></p>
<ul>
<li>字面常量;</li>
<li>使用关键字const声明的常量;</li>
<li>使用关键字constexpr声明的常量表达式（C++11 新增的）;</li>
<li>使用关键字enum (class)声明的枚举常量;</li>
<li>使用#define定义的常量（不推荐）；</li>
</ul>
<p><strong>3.6.2 使用const将变量声明为常量</strong></p>
<p>​	通用的声明方法：const typeName constantName &#x3D; value;  </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单3.7 声明一个名为pi的变量</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">const</span> <span class="type">double</span> pi = <span class="number">22.0</span> / <span class="number">7</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;The value of constant pi is: &quot;</span> &lt;&lt; pi &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3.6.3 使用constexpr 定义常量表达式</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单3.8 使用常量表达式来计算pi的值</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="type">double</span> <span class="title">GetPi</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="number">22.0</span> / <span class="number">7</span>; &#125;</span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="type">double</span> <span class="title">TwicePi</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="number">2</span> * <span class="built_in">GetPi</span>(); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">const</span> <span class="type">double</span> pi = <span class="number">22.0</span> / <span class="number">7</span>;</span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;constant pi contains value &quot;</span> &lt;&lt; pi &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;constexpr GetPi() returns value &quot;</span> &lt;&lt; <span class="built_in">GetPi</span>() &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;constexpr TwicePi() return value &quot;</span> &lt;&lt; <span class="built_in">TwicePi</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3.6.4 枚举</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单3.9 使用枚举量指示基本方位</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">CardinalDirections</span></span><br><span class="line">&#123;</span><br><span class="line">	North = <span class="number">25</span>,</span><br><span class="line">	South,</span><br><span class="line">	West,</span><br><span class="line">	East,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot; Displaying directions and their symbolic values&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;North: &quot;</span> &lt;&lt; North &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;South: &quot;</span> &lt;&lt; South &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;West: &quot;</span> &lt;&lt; West &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;East: &quot;</span> &lt;&lt; East &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	CardinalDirections windDirection = South;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Variable windDirection = &quot;</span> &lt;&lt; windDirection &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h2><p><strong>3.10.1 测验</strong></p>
<ol>
<li><p><strong>有符号整型和无符号整型有何不同?</strong></p>
<p><strong>答</strong>：它们在内存中的最高位表示不同，无符号的最高位表示数值，有符号的最高位表示符号位</p>
</li>
<li><p><strong>为何不应使用#define来声明常量？</strong></p>
<p><strong>答</strong>：#define定义的常量只是进行文本替换，不进行安全检查，这是不安全的。</p>
</li>
<li><p><strong>为何要对变量进行初始化？</strong></p>
<p><strong>答</strong>：初始化变量是一个良好的编程习惯，可以增强代码的<strong>可读性</strong>、<strong>可靠性</strong>和<strong>安全性</strong>，避免意外行为的发生。</p>
</li>
<li><p><strong>给定如下枚举类型，Quee的值是多少？</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">YourCards</span> &#123;Ace, Jack, Queen, King&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>答</strong>：2</p>
</li>
<li><p><strong>下述变量名有何问题？</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> Interger = <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<p><strong>答</strong>：编译没有问题，但是变量名不能够正确表达意思。</p>
</li>
</ol>
<p><strong>3.10.2 练习</strong></p>
<ol>
<li><p><strong>修改测试题4中的枚举类型，让Queen的值为45</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">YourCards</span> &#123;Ace, Jack, Queen = <span class="number">45</span>, King&#125;; <span class="comment">//方法一 0，1，45，46</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">YourCards</span> &#123;Ace = <span class="number">43</span>, Jack, Queen = <span class="number">45</span>, King&#125;; <span class="comment">//方法二 43，44，45，36</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>编写一个程序，证明unsigned int 和 int 变量的长度，且它们对比long变量短。</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;unsigned int &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">unsigned</span> <span class="type">int</span>) &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;int &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">int</span>) &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;long &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">long</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>编写一个程序，让用户输入圆的半径，并计算其面积和周长？</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">double</span> pi = <span class="number">3.14</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter your radius:&quot;</span>;</span><br><span class="line">	<span class="type">double</span> radius = <span class="number">0.0</span>;</span><br><span class="line">	cin &gt;&gt; radius;</span><br><span class="line"></span><br><span class="line">	<span class="type">double</span> circumference = <span class="number">2</span> * radius * pi;</span><br><span class="line">	<span class="type">double</span> area = radius * radius * pi;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;circumference = &quot;</span> &lt;&lt; circumference &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;area = &quot;</span> &lt;&lt; area &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>在练习3中，如果将面积和周长存储在int中，输出将有何不同？</strong></p>
<p><strong>答</strong>：会损失小数的精度，输出一个整型</p>
</li>
<li><p><strong>查错：下面的语句有何错误？</strong></p>
<p><code>auto Integer</code></p>
</li>
</ol>
<p>​		<strong>答：</strong>Integer没有初值，auto无法进行推导</p>
<h1 id="第四章"><a href="#第四章" class="headerlink" title="第四章"></a>第四章</h1><h2 id="4-1-什么是数组"><a href="#4-1-什么是数组" class="headerlink" title="4.1 什么是数组"></a>4.1 什么是数组</h2><p><strong>数组具有一下特点</strong></p>
<ul>
<li>数组是一系列元素</li>
<li>数组中所有元素都是相同类型</li>
<li>这组元素形成一个完整的集合</li>
</ul>
<p><strong>4.1.2 声明和初始化静态数组</strong></p>
<p>​	数组声明如下</p>
<p>​	<code>ElementType ArrayName [constant_number of elements] = &#123;optional initial values&#125;;</code></p>
<p><strong>4.1.4 访问存储在数组中的数据</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单 4.1 声明一个int数组并访问其元素</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> myNumbers[<span class="number">5</span>] = &#123; <span class="number">34</span>,<span class="number">56</span>,<span class="number">-21</span>,<span class="number">5002</span>,<span class="number">365</span> &#125;;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;First element at index 0:&quot;</span> &lt;&lt; myNumbers[<span class="number">0</span>] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Second element at index 1:&quot;</span> &lt;&lt; myNumbers[<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Third element at index 2:&quot;</span> &lt;&lt; myNumbers[<span class="number">2</span>] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Fourth element at index 3:&quot;</span> &lt;&lt; myNumbers[<span class="number">3</span>] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Fifth element at index 4:&quot;</span> &lt;&lt; myNumbers[<span class="number">4</span>] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>4.1.5 修改存储在数组中的数据</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单 4.2 给元素赋值</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="type">int</span> <span class="title">Square</span><span class="params">(<span class="type">int</span> number)</span> </span>&#123; <span class="keyword">return</span> number * number; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">const</span> <span class="type">int</span> ARRAY_LENGTH = <span class="number">5</span>;</span><br><span class="line">	<span class="type">int</span> myNumbers[ARRAY_LENGTH] = &#123; <span class="number">5</span>,<span class="number">10</span>,<span class="number">0</span>,<span class="number">-101</span>,<span class="number">20</span>&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> moreNumbers[<span class="built_in">Square</span>(ARRAY_LENGTH)];</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter index of the element to be change:&quot;</span>;</span><br><span class="line">	<span class="type">int</span> elementIndex = <span class="number">0</span>;</span><br><span class="line">	cin &gt;&gt; elementIndex;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter new value&quot;</span>;</span><br><span class="line">	<span class="type">int</span> newValue;</span><br><span class="line">	cin &gt;&gt; newValue;</span><br><span class="line"></span><br><span class="line">	myNumbers[elementIndex] = newValue;</span><br><span class="line">	moreNumbers[elementIndex] = newValue;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Element &quot;</span> &lt;&lt; elementIndex &lt;&lt; <span class="string">&quot;in array myNumbers is: &quot;</span> &lt;&lt; myNumbers[elementIndex] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Element &quot;</span> &lt;&lt; elementIndex &lt;&lt; <span class="string">&quot;in array moreNumbers is: &quot;</span> &lt;&lt; moreNumbers[elementIndex] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-2-多维数组"><a href="#4-2-多维数组" class="headerlink" title="4.2 多维数组"></a>4.2 多维数组</h2><p><strong>4.2.1 声明和初始化多维数组</strong></p>
<p>​	在C++中，要声明多维数组，可指定每维包含的元素数  </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> solarPanels[<span class="number">2</span>][<span class="number">3</span>] = &#123;&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>4.2.2 访问多维数组中的元素</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单 4.3 访问多维数组中的元素</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> threeRowsThreeColumns[<span class="number">3</span>][<span class="number">3</span>] = \</span><br><span class="line">	&#123;&#123;<span class="number">-501</span>, <span class="number">205</span>, <span class="number">2016</span>&#125;, &#123; <span class="number">989</span>,<span class="number">101</span>,<span class="number">206</span> &#125;, &#123;<span class="number">303</span>,<span class="number">456</span>,<span class="number">596</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Row 0:&quot;</span> &lt;&lt; threeRowsThreeColumns[<span class="number">0</span>][<span class="number">0</span>] &lt;&lt; <span class="string">&quot; &quot;</span>\</span><br><span class="line">		 &lt;&lt; threeRowsThreeColumns[<span class="number">0</span>][<span class="number">1</span>] &lt;&lt; <span class="string">&quot; &quot;</span>\</span><br><span class="line">		 &lt;&lt; threeRowsThreeColumns[<span class="number">0</span>][<span class="number">2</span>] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Row 1:&quot;</span> &lt;&lt; threeRowsThreeColumns[<span class="number">1</span>][<span class="number">0</span>] &lt;&lt; <span class="string">&quot; &quot;</span>\</span><br><span class="line">		&lt;&lt; threeRowsThreeColumns[<span class="number">1</span>][<span class="number">1</span>] &lt;&lt; <span class="string">&quot; &quot;</span>\</span><br><span class="line">		&lt;&lt; threeRowsThreeColumns[<span class="number">1</span>][<span class="number">2</span>] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Row 2:&quot;</span> &lt;&lt; threeRowsThreeColumns[<span class="number">2</span>][<span class="number">0</span>] &lt;&lt; <span class="string">&quot; &quot;</span>\</span><br><span class="line">		&lt;&lt; threeRowsThreeColumns[<span class="number">2</span>][<span class="number">1</span>] &lt;&lt; <span class="string">&quot; &quot;</span>\</span><br><span class="line">		&lt;&lt; threeRowsThreeColumns[<span class="number">2</span>][<span class="number">2</span>] &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-3-动态数组"><a href="#4-3-动态数组" class="headerlink" title="4.3 动态数组"></a>4.3 动态数组</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单 4.4 创建int动态数组并动态插入</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dynArray</span><span class="params">(<span class="number">3</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	dynArray[<span class="number">0</span>] = <span class="number">365</span>;</span><br><span class="line">	dynArray[<span class="number">1</span>] = <span class="number">-421</span>;</span><br><span class="line">	dynArray[<span class="number">2</span>] = <span class="number">789</span>;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Number of integers in array: &quot;</span> &lt;&lt; dynArray.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter another element to insert&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="type">int</span> newValue = <span class="number">0</span>;</span><br><span class="line">	cin &gt;&gt; newValue;</span><br><span class="line">	dynArray.<span class="built_in">push_back</span>(newValue);</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Number of integers in arry: &quot;</span> &lt;&lt; dynArray.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Last element in array: &quot;</span> &lt;&lt; dynArray[dynArray.<span class="built_in">size</span>() - <span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-4-C风格字符串"><a href="#4-4-C风格字符串" class="headerlink" title="4.4 C风格字符串"></a>4.4 C风格字符串</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单 4.5 分析C风格字符串中的终止空字符</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">char</span> sayHello[] = &#123;<span class="string">&#x27;H&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;l&#x27;</span>,<span class="string">&#x27;l&#x27;</span>,<span class="string">&#x27;o&#x27;</span>,<span class="string">&#x27; &#x27;</span>,<span class="string">&#x27;w&#x27;</span>,<span class="string">&#x27;o&#x27;</span>,<span class="string">&#x27;r&#x27;</span>,<span class="string">&#x27;l&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;\0&#x27;</span>&#125;;</span><br><span class="line">	cout &lt;&lt; sayHello &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Size of array: &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(sayHello) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Replaceing space with null&quot;</span> &lt;&lt; endl;</span><br><span class="line">	sayHello[<span class="number">5</span>] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Size of array: &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(sayHello) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-5-C-字符串：使用std-string"><a href="#4-5-C-字符串：使用std-string" class="headerlink" title="4.5 C++字符串：使用std::string"></a>4.5 C++字符串：使用std::string</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单 4.7 使用std::string初始化字符串、存储用户输入、复制和拼接字符串以及字符串的长度</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">string <span class="title">greetString</span><span class="params">(<span class="string">&quot;Hello std::string!&quot;</span>)</span></span>;</span><br><span class="line">	cout &lt;&lt; greetString &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter a line of text: &quot;</span> &lt;&lt; endl;</span><br><span class="line">	string firstLine;</span><br><span class="line">	<span class="built_in">getline</span>(cin, firstLine);</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot; Enter another: &quot;</span> &lt;&lt; endl;</span><br><span class="line">	string secondLine;</span><br><span class="line">	<span class="built_in">getline</span>(cin, secondLine);</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Result of concatenation: &quot;</span> &lt;&lt; endl;</span><br><span class="line">	string concatString = firstLine + <span class="string">&quot; &quot;</span> + secondLine;</span><br><span class="line">	cout &lt;&lt; concatString;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Copy of concatentated string: &quot;</span> &lt;&lt; endl;</span><br><span class="line">	string aCopy;</span><br><span class="line">	aCopy = concatString;</span><br><span class="line">	cout &lt;&lt; aCopy &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Length of concatString: &quot;</span> &lt;&lt; concatString.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-8-作业"><a href="#4-8-作业" class="headerlink" title="4.8 作业"></a>4.8 作业</h2><p><strong>4.8.1 测验</strong></p>
<ol>
<li><p><strong>d对于程序清单4.1中的数组myNumbers,第一个和最后一个的索引元素分别是多少？</strong></p>
<p><strong>答</strong>：0和4</p>
</li>
<li><p><strong>如果需要让用户输入字符串，该使用C风格的字符串吗？</strong></p>
<p><strong>答</strong>：不推荐使用，应该使用std::string，以防止出现越界的情况</p>
</li>
<li><p><strong>在编译器看来，’\0’表示多少个字符？</strong></p>
<p><strong>答</strong>：1个</p>
</li>
<li><p><strong>如果忘记在C风格字符串末尾添加空字符，使用它的结果将会如何？</strong></p>
<p><strong>答</strong>：会出现字符串乱码</p>
</li>
<li><p><strong>根据程序清单4.4中的矢量的声明，尝试声明一个包含char元素的动态数组？</strong></p>
<p><strong>答</strong>：<code>vector&lt;char&gt; charArray;</code></p>
</li>
</ol>
<p><strong>4.8.2 练习</strong></p>
<ol>
<li><strong>声明一个国际象棋棋盘的数组；该数组的类型为枚举，该枚举定义了可能出现在棋盘方格中的棋子。</strong></li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Square</span></span><br><span class="line">&#123;</span><br><span class="line">	empty = <span class="number">0</span>,</span><br><span class="line">	Pawn,</span><br><span class="line">	Rook,</span><br><span class="line">	Knight,</span><br><span class="line">	Bishop,</span><br><span class="line">	King,</span><br><span class="line">	Queen</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Square chessBoard[<span class="number">8</span>][<span class="number">8</span>];</span><br><span class="line">	chessBoard[<span class="number">0</span>][<span class="number">0</span>] = chessBoard[<span class="number">0</span>][<span class="number">7</span>] = Rook;</span><br><span class="line">	chessBoard[<span class="number">7</span>][<span class="number">7</span>] = chessBoard[<span class="number">7</span>][<span class="number">0</span>] = Rook;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>查错：下面的代码段有什么错误？</strong></li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> myNumbers[<span class="number">5</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">myNumbers[<span class="number">5</span>] = <span class="number">450</span>;</span><br></pre></td></tr></table></figure>

<p>​	<strong>答</strong>：越界操作</p>
<ol start="3">
<li><strong>查错：下面的代码段有什么错误？</strong></li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> myNumbers[<span class="number">5</span>];</span><br><span class="line">cout &lt;&lt; myNumbers[<span class="number">3</span>];</span><br></pre></td></tr></table></figure>

<p>​	<strong>答</strong>：访问了未初始化的内存</p>
<h1 id="第五章"><a href="#第五章" class="headerlink" title="第五章"></a>第五章</h1><h2 id="5-3-使用运算符"><a href="#5-3-使用运算符" class="headerlink" title="5.3 使用运算符"></a>5.3 使用运算符</h2><p>​	<strong>5.3.2 理解左值和右值</strong></p>
<ul>
<li>左值：通常是内存单元</li>
<li>右值：是内存单元的内容</li>
<li>所有左值可以用作右值，但并非所有右值都可以用作左值</li>
</ul>
<p>​	<strong>5.3.3 加法运算符、除法运算符、减法运算符、乘法运算符和取模运算符</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单5.1 演示如何对用户输入的整数执行算术运算</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter two integers: &quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="type">int</span> num1 = <span class="number">0</span>, num2 = <span class="number">0</span>;</span><br><span class="line">	cin &gt;&gt; num1;</span><br><span class="line">	cin &gt;&gt; num2;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; num1 &lt;&lt; <span class="string">&quot; + &quot;</span> &lt;&lt; num2 &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; num1 + num2 &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; num1 &lt;&lt; <span class="string">&quot; - &quot;</span> &lt;&lt; num2 &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; num1 - num2 &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; num1 &lt;&lt; <span class="string">&quot; * &quot;</span> &lt;&lt; num2 &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; num1 * num2 &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; num1 &lt;&lt; <span class="string">&quot; / &quot;</span> &lt;&lt; num2 &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; num1 / num2 &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; num1 &lt;&lt; <span class="string">&quot; % &quot;</span> &lt;&lt; num2 &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; num1 % num2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>5.3.5 前缀还是后缀</strong></p>
<ul>
<li>前缀：先将右值递增或递减，再将结果赋给左值。</li>
<li>后缀：先将右值赋给左值，再将右值递减或递增</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单5.2 前缀运算符和后缀运算符之间的差别</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> startValue = <span class="number">101</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Sart value of integer being operated: &quot;</span> &lt;&lt; startValue &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> postfixIncrement = startValue++;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Result of Postfix Increment = &quot;</span> &lt;&lt; postfixIncrement &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;After Postfix Increment, startValue = &quot;</span> &lt;&lt; startValue &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	startValue = <span class="number">101</span>;</span><br><span class="line">	<span class="type">int</span> prefixIncrement = ++startValue;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Result of prefix Increment = &quot;</span> &lt;&lt; prefixIncrement &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;After prefix Increment, startValue = &quot;</span> &lt;&lt; startValue &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	startValue = <span class="number">101</span>;</span><br><span class="line">	<span class="type">int</span> postfixDecrement = startValue--;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Result of Postfix Decrement = &quot;</span> &lt;&lt; postfixDecrement &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;After Postfix Decrement, startValue = &quot;</span> &lt;&lt; startValue &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	startValue = <span class="number">101</span>;</span><br><span class="line">	<span class="type">int</span> prefixDecrement = --startValue;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Result of Postfix Decrement = &quot;</span> &lt;&lt; prefixDecrement &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;After prefix Decrement, startValue = &quot;</span> &lt;&lt; startValue &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="作业-1"><a href="#作业-1" class="headerlink" title="作业"></a>作业</h2><p><strong>5.6.1 测验</strong></p>
<ol>
<li><p><strong>编写将两个数相除的应用程序时，将变量声明为哪种数据类型更合适，int还是float？</strong></p>
<p><strong>答</strong>：float,防止精度丢失。</p>
</li>
<li><p><strong>32&#x2F;7的结果是多少？</strong></p>
<p><strong>答</strong>：4</p>
</li>
<li><p><strong>32.0&#x2F;7的结果是多少？</strong></p>
<p><strong>答</strong>：4.57143</p>
</li>
<li><p><strong>sizeof()是函数吗？</strong></p>
<p><strong>答</strong>：是关键字</p>
</li>
<li><p><strong>我需要将一个数翻倍，再加上5，然后在翻倍，下面的代码是否正确？</strong></p>
<p><code>int result = number &lt;&lt; 1 + 5 &lt;&lt; 1</code></p>
<p><strong>答</strong>：不正确</p>
</li>
<li><p><strong>如果两个操作数的值都为true,对其执行XOR的结果是什么?</strong></p>
<p><strong>答</strong>：false</p>
</li>
</ol>
<p><strong>5.6.2 练习</strong></p>
<ol>
<li><p><strong>使用括号改善测试题5中的代码，使其清晰</strong></p>
<p><strong>答</strong>：<code>int result = ((number &lt;&lt; 1) +  5) &lt;&lt; 1;</code></p>
</li>
<li><p><strong>下述代码导致result的值为多少？</strong></p>
<p><strong>答</strong>：<code>result &lt;&lt; 7</code></p>
</li>
<li><p><strong>编写一个程序，让用户输入两个布尔值，并显示其执行各种按位运算的结果。</strong></p>
</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter your two bool value:&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="type">bool</span> bit1 = <span class="literal">false</span>;</span><br><span class="line">	<span class="type">bool</span> bit2 = <span class="literal">false</span>;</span><br><span class="line">	cin &gt;&gt; bit1;</span><br><span class="line">	cin &gt;&gt; bit2;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;or: &quot;</span> &lt;&lt; (bit1 | bit2) &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;and: &quot;</span> &lt;&lt; (bit1 &amp; bit2) &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;xor: &quot;</span> &lt;&lt; (bit1 ^ bit2) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="第六章"><a href="#第六章" class="headerlink" title="第六章"></a>第六章</h1><h2 id="6-2-在循环中执行代码"><a href="#6-2-在循环中执行代码" class="headerlink" title="6.2 在循环中执行代码"></a>6.2 在循环中执行代码</h2><p><strong>6.2.5 基于范围的for循环</strong></p>
<p>​	for(VarType varName : sequence){</p>
<p>​			&#x2F;&#x2F;Use varName that contains an element from sequence</p>
<p>​	}</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单6.12 使用基于范围的for循环来处理数组和std::string</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> sumoNums[] = &#123; <span class="number">1</span>,<span class="number">101</span>,<span class="number">-1</span>,<span class="number">40</span>,<span class="number">2040</span> &#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">const</span> <span class="type">int</span>&amp; aNum : sumoNums) &#123;</span><br><span class="line">		cout &lt;&lt; aNum &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">auto</span> anElement : &#123; <span class="number">5</span>,<span class="number">222</span>,<span class="number">110</span>,<span class="number">-45</span>,<span class="number">2017</span> &#125;) &#123;</span><br><span class="line">		cout &lt;&lt; anElement &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="type">char</span> charArray[] = &#123; <span class="string">&#x27;h&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;l&#x27;</span>,<span class="string">&#x27;l&#x27;</span>,<span class="string">&#x27;o&#x27;</span> &#125;;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">auto</span> anElement : charArray) &#123;</span><br><span class="line">		cout &lt;&lt; anElement &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="type">double</span> moreNums[] = &#123; <span class="number">3.14</span>,<span class="number">-1.3</span>,<span class="number">22</span>,<span class="number">10101</span> &#125;;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">auto</span> anElement : moreNums) &#123;</span><br><span class="line">		cout &lt;&lt; anElement &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	string sayHello&#123; <span class="string">&quot;Hello world!&quot;</span> &#125;;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">auto</span> anElement : sayHello) &#123;</span><br><span class="line">		cout &lt;&lt; anElement &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-7-作业"><a href="#6-7-作业" class="headerlink" title="6.7 作业"></a>6.7 作业</h2><hr>
<p><strong>6.7.1 测验</strong></p>
<ol>
<li><p><strong>既然不缩进也能通过编译，为什么要缩进语句块、嵌套if语句和嵌套循环？</strong></p>
<p><strong>答</strong>：缩进让代码结构更加清晰，便于阅读和理解</p>
</li>
<li><p><strong>使用goto可以快速解决问题，为何还要避免使用它？</strong></p>
<p><strong>答</strong>：goto会破坏程序的结构，容易引发逻辑错误</p>
</li>
<li><p><strong>可以编写计算器递减的for循环吗？这样的for循环是什么样的？</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = value; i &gt; <span class="number">0</span>; i--)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>下面的循环有何问题？</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> counter = <span class="number">0</span>; counter == <span class="number">10</span>; ++counter)</span><br><span class="line">    cout &lt;&lt; counter &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br></pre></td></tr></table></figure>

<p><strong>答</strong>:判断条件存在问题，应该改为counter !&#x3D; 10</p>
</li>
</ol>
<p><strong>6.7.2 练习</strong></p>
<ol>
<li><p><strong>编写一个for循环,以倒叙的方式访问数组</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">const</span> <span class="type">int</span> ARRAY_LENGTH = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> arr[ARRAY_LENGTH] = &#123; <span class="number">0</span> ,<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = ARRAY_LENGTH - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">		cout &lt;&lt; arr[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>编写一个类似于程序清单6.14的嵌套for循环，但以倒序方式将一个数组的每个元素都与另一个数组的每个元素相加。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">const</span> <span class="type">int</span> ARRAY_LENGTH = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> arr1[ARRAY_LENGTH] = &#123; <span class="number">0</span> ,<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;;</span><br><span class="line">	<span class="type">int</span> arr2[ARRAY_LENGTH] = &#123; <span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span> &#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = ARRAY_LENGTH - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; ARRAY_LENGTH; j++) &#123;</span><br><span class="line">			arr1[i] += arr2[j];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; ARRAY_LENGTH; i++) &#123;</span><br><span class="line">		cout &lt;&lt; arr1[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>编写一个程序，象清单6.16那样显示斐波那契数列，但让用户指定每次显示多少个</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Please enter the number of items to display per line.&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="type">int</span> num = <span class="number">0</span>;</span><br><span class="line">	cin &gt;&gt; num;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> n1 = <span class="number">0</span>, n2 = <span class="number">1</span>;</span><br><span class="line">	<span class="type">char</span> wantMore = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">	cout &lt;&lt; n1 &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; n2 &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; endl;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">do</span>&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">			cout &lt;&lt; n1 + n2 &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">			<span class="type">int</span> num2Temp = n2;</span><br><span class="line">			n2 = n1 + n2;</span><br><span class="line">			n1 = num2Temp;</span><br><span class="line">		&#125;</span><br><span class="line">		cout &lt;&lt; endl &lt;&lt; <span class="string">&quot;Do you want more numbers(y/n)&quot;</span>;</span><br><span class="line">		cin &gt;&gt; wantMore;</span><br><span class="line">	&#125; <span class="keyword">while</span> (wantMore == <span class="string">&#x27;y&#x27;</span>);</span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Goodbye&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>编写一个switch-case结构，指出用户选择的颜色是否出现在彩虹中。请使用枚举常量</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Colors</span></span><br><span class="line">&#123;</span><br><span class="line">	Violet,Indigo,Blue,Green,Yellow,Orange,Red,Crimson,Beige,Brown,Peach,Pink,White</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Here are the available colors: &quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Violet,Indigo,Blue,Green,Yellow,Orange,Red,Crimson,Beige,Brown,Peach,Pink,White&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Corresponding to the numbers 0 to 12.&quot;</span> &lt;&lt; endl;</span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Choose one by entering  code: &quot;</span>;</span><br><span class="line">	<span class="type">int</span> yourChoice = Blue;</span><br><span class="line">	cin &gt;&gt; yourChoice;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">switch</span> (yourChoice)</span><br><span class="line">	&#123;</span><br><span class="line">	<span class="keyword">case</span> Violet:</span><br><span class="line">	<span class="keyword">case</span> Indigo:</span><br><span class="line">	<span class="keyword">case</span> Blue:</span><br><span class="line">	<span class="keyword">case</span> Green:</span><br><span class="line">	<span class="keyword">case</span> Yellow:</span><br><span class="line">	<span class="keyword">case</span> Orange:</span><br><span class="line">	<span class="keyword">case</span> Red:</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;Bingo,your choice is a Rainbow color!&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;The color you chose is not in the rainbow&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>查错：下面的代码有何错误？</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> counter = <span class="number">0</span>; counter = <span class="number">10</span>; ++counter)</span><br><span class="line">    cout &lt;&lt; counter &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br></pre></td></tr></table></figure>

<p><strong>答</strong>：counter&#x3D;10,这条语句可能会导致死循环</p>
</li>
<li><p><strong>查错：下面的代码有何错误？</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> loopCounter = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(loopCounter &lt; <span class="number">5</span>);</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; loopCounter &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    loopCounter++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>答</strong>：while(loopCounter &lt; 5);的分号会导致死循环，不会执行后面的操作。</p>
</li>
<li><p><strong>查错：下面的代码有何错误？</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">cout &lt;&lt; <span class="string">&quot;Enter a number between 0 and 4&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="type">int</span> input = <span class="number">0</span>;</span><br><span class="line">cin &gt;&gt; input;</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (input)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Valid input&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Invalid input&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>答</strong>：没有在cout &lt;&lt; “Valid input” &lt;&lt; endl;后添加break.</p>
</li>
</ol>
<h1 id="第七章"><a href="#第七章" class="headerlink" title="第七章"></a>第七章</h1><h2 id="7-1-为何需要函数"><a href="#7-1-为何需要函数" class="headerlink" title="7.1 为何需要函数"></a>7.1 为何需要函数</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单7.1 两个根据半径分别计算圆的面积和周长的函数</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">double</span> Pi = <span class="number">3.14159265</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">Area</span><span class="params">(<span class="type">double</span> radius)</span></span>;</span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">Circumference</span><span class="params">(<span class="type">double</span> radius)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter radius: &quot;</span>;</span><br><span class="line">	<span class="type">double</span> radius = <span class="number">0</span>;</span><br><span class="line">	cin &gt;&gt; radius;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Area is: &quot;</span> &lt;&lt; <span class="built_in">Area</span>(radius) &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Circumference is: &quot;</span> &lt;&lt; <span class="built_in">Circumference</span>(radius) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">Area</span><span class="params">(<span class="type">double</span> radius)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> Pi * radius * radius;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">Circumference</span><span class="params">(<span class="type">double</span> radius)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> Pi * <span class="number">2</span> * radius;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>7.1.1 函数原型是什么</strong></p>
<p><code>double Area(double radius);</code></p>
<ul>
<li>double: 返回值类型</li>
<li>Area:函数名</li>
<li>(double radius):函数参数（可选）,参数列表由参数类型和参数名（可选）组成，当有多个参数时，用逗号隔开。</li>
</ul>
<p>​	<strong>函数原型</strong>：指出了函数的名称、函数接受的参数列表以及返回值类型</p>
<p><strong>7.1.2 函数定义是什么</strong></p>
<p>​	<strong>函数定义</strong>：总是由一个语句块组成。除非返回类型被声明为void，否则必须包含一条return语句。</p>
<p><strong>7.1.3  函数调用和实参是什么</strong></p>
<ul>
<li>**形参(parameter)**：函数声明中包含的参数。</li>
<li>**实参(argument)**：调用函数提供的参数</li>
</ul>
<p><strong>7.1.4 编写接收多个参数的函数</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单7.2 接受两个参数以计算圆柱表面积的函数</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">double</span> Pi = <span class="number">3.14159265</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">SurfaceArea</span><span class="params">(<span class="type">double</span> radius, <span class="type">double</span> height)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter the radius of the cyliner:&quot;</span>;</span><br><span class="line">	<span class="type">double</span> radius = <span class="number">0</span>;</span><br><span class="line">	cin &gt;&gt; radius;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter the height of the cyliner:&quot;</span>;</span><br><span class="line">	<span class="type">double</span> height = <span class="number">0</span>;</span><br><span class="line">	cin &gt;&gt; height;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;SurfaceArea is : &quot;</span> &lt;&lt; <span class="built_in">SurfaceArea</span>(radius, height) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">SurfaceArea</span><span class="params">(<span class="type">double</span> radius, <span class="type">double</span> height)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">double</span> area = <span class="number">2</span> * Pi * radius * radius + <span class="number">2</span> * Pi * radius * height;</span><br><span class="line">	<span class="keyword">return</span> area;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>7.1.5 编写没有参数和返回值的函数</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单7.3 没有参数和返回值的函数</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SayHello</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">SayHello</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SayHello</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;heloo world&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>7.1.6 带默认值的函数参数</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单7.4 计算圆面积的函数，其第二个参数为pi,该参数的默认值为3.14</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">Area</span><span class="params">(<span class="type">double</span> radius, <span class="type">double</span> pi = <span class="number">3.14</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter radius: &quot;</span>;</span><br><span class="line">	<span class="type">double</span> radius = <span class="number">0</span>;</span><br><span class="line">	cin &gt;&gt; radius;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;pi is 3.14, do you wish to change this(y/n)?&quot;</span>;</span><br><span class="line">	<span class="type">char</span> changePi = <span class="string">&#x27;n&#x27;</span>;</span><br><span class="line">	cin &gt;&gt; changePi;</span><br><span class="line"></span><br><span class="line">	<span class="type">double</span> circleArea = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">if</span> (changePi == <span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;Enter new Pi: &quot;</span>;</span><br><span class="line">		<span class="type">double</span> newPi = <span class="number">3.14</span>;</span><br><span class="line">		cin &gt;&gt; newPi;</span><br><span class="line">		circleArea = <span class="built_in">Area</span>(radius, newPi);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		circleArea = <span class="built_in">Area</span>(radius);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Area is: &quot;</span> &lt;&lt; circleArea &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">Area</span><span class="params">(<span class="type">double</span> radius, <span class="type">double</span> pi)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> radius * radius * pi;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>7.1.7 递归函数——调用自己的函数</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单7.5 使用递归函数计算斐波那契数列中的数字</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">GetFibNumber</span><span class="params">(<span class="type">int</span> fibIndex)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (fibIndex &lt; <span class="number">2</span>) <span class="keyword">return</span> fibIndex;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">GetFibNumber</span>(fibIndex - <span class="number">1</span>) + <span class="built_in">GetFibNumber</span>(fibIndex - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter 0-Based index of desired Fibonacci Number: &quot;</span>;</span><br><span class="line">	<span class="type">int</span> index = <span class="number">0</span>;</span><br><span class="line">	cin &gt;&gt; index;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Fibonacci number is: &quot;</span> &lt;&lt; <span class="built_in">GetFibNumber</span>(index) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-2-使用函数处理不同的数据"><a href="#7-2-使用函数处理不同的数据" class="headerlink" title="7.2 使用函数处理不同的数据"></a>7.2 使用函数处理不同的数据</h2><p><strong>7.2.1 函数重载</strong></p>
<p>​	<strong>名称和返回值相同，但参数不同的函数称为函数重载。</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单7.7 在同一个函数中使用多条语句</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">double</span> Pi = <span class="number">3.14159265</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">Area</span><span class="params">(<span class="type">double</span> radius)</span></span>;</span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">Area</span><span class="params">(<span class="type">double</span> radius, <span class="type">double</span> height)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter z fro cyliner, c for Circle: &quot;</span>;</span><br><span class="line">	<span class="type">char</span> userSelection = <span class="string">&#x27;z&#x27;</span>;</span><br><span class="line">	cin &gt;&gt; userSelection;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter radius: &quot;</span>;</span><br><span class="line">	<span class="type">double</span> radius = <span class="number">0</span>;</span><br><span class="line">	cin &gt;&gt; radius;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (userSelection == <span class="string">&#x27;z&#x27;</span>)&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;Enter height:&quot;</span>;</span><br><span class="line">		<span class="type">double</span> height = <span class="number">0</span>;</span><br><span class="line">		cin &gt;&gt; height;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;Area of cyliner is: &quot;</span> &lt;&lt; <span class="built_in">Area</span>(radius, height) &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;Area of cyliner is: &quot;</span> &lt;&lt; <span class="built_in">Area</span>(radius) &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">Area</span><span class="params">(<span class="type">double</span> radius)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> radius * radius * Pi;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">Area</span><span class="params">(<span class="type">double</span> radius, <span class="type">double</span> height)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">2</span> * <span class="built_in">Area</span>(radius) + <span class="number">2</span> * Pi * radius * height;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>7.2.2 将数组传递给函数</strong></p>
<p><strong>示例</strong>：<code>void DisplayIntegers(int numbers[], int Length);</code></p>
<ul>
<li>第一参数是一个整型数组</li>
<li>第二个参数是数组的长度</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单7.8 接受数组作为参数的函数</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DisplayArray</span><span class="params">(<span class="type">int</span> numbers[], <span class="type">int</span> length)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DisplayArray</span><span class="params">(<span class="type">char</span> charaters[], <span class="type">int</span> length)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> myNums[<span class="number">4</span>] = &#123; <span class="number">24</span>,<span class="number">58</span>,<span class="number">-1</span>,<span class="number">245</span> &#125;;</span><br><span class="line">	<span class="built_in">DisplayArray</span>(myNums, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">	<span class="type">char</span> myStatement[<span class="number">7</span>] = &#123; <span class="string">&#x27;h&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;l&#x27;</span>,<span class="string">&#x27;l&#x27;</span>,<span class="string">&#x27;o&#x27;</span>,<span class="string">&#x27;!&#x27;</span>,<span class="string">&#x27;\0&#x27;</span> &#125;;</span><br><span class="line">	<span class="built_in">DisplayArray</span>(myStatement, <span class="number">7</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DisplayArray</span><span class="params">(<span class="type">int</span> numbers[], <span class="type">int</span> length)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; length; i++)&#123;</span><br><span class="line">		cout &lt;&lt; numbers[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DisplayArray</span><span class="params">(<span class="type">char</span> charaters[], <span class="type">int</span> length)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; length; i++)&#123;</span><br><span class="line">		cout &lt;&lt; charaters[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>7.2.3 按引用传递参数</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单7.9 以引用参数（而不是返回值）的方式提供圆的面积</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">double</span> Pi = <span class="number">3.1416</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Area</span><span class="params">(<span class="type">double</span> radius, <span class="type">double</span>&amp; result)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter radius: &quot;</span>;</span><br><span class="line">	<span class="type">double</span> radius = <span class="number">0</span>;</span><br><span class="line">	cin &gt;&gt; radius;</span><br><span class="line"></span><br><span class="line">	<span class="type">double</span> areaFetched = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">Area</span>(radius, areaFetched);</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;This area is: &quot;</span> &lt;&lt; areaFetched &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Area</span><span class="params">(<span class="type">double</span> radius, <span class="type">double</span>&amp; result)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	result = radius * radius * Pi;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-3-微处理器如何处理函数调用"><a href="#7-3-微处理器如何处理函数调用" class="headerlink" title="7.3 微处理器如何处理函数调用"></a>7.3 微处理器如何处理函数调用</h2><p><strong>7.3.1 内联函数</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单7.10 将把整数翻倍的函数声明为内联</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">long</span> <span class="title">DoubleNum</span><span class="params">(<span class="type">int</span> inputNum)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> inputNum * <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter an integer: &quot;</span>;</span><br><span class="line">	<span class="type">int</span> input = <span class="number">0</span>;</span><br><span class="line">	cin &gt;&gt; input;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Double is:&quot;</span> &lt;&lt; <span class="built_in">DoubleNum</span>(input) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>7.3.2 自动推断返回类型</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单7.11 将函数Area()的返回类型指定为auto</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">double</span> Pi = <span class="number">3.14159265</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">Area</span><span class="params">(<span class="type">double</span> radius)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span>  Pi * radius * radius;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter radius: &quot;</span>;</span><br><span class="line">	<span class="type">double</span> radius = <span class="number">0</span>;</span><br><span class="line">	cin &gt;&gt; radius;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Area is: &quot;</span> &lt;&lt; <span class="built_in">Area</span>(radius) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>7.3.3 lambda函数</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单 7.12 使用lambda函数对数组中的元素进行排序并显示它们</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DisplayNums</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; dynArray)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	for_each(dynArray.<span class="built_in">begin</span>(), dynArray.<span class="built_in">end</span>(), \</span><br><span class="line">		[](<span class="type">int</span> Element) &#123;cout &lt;&lt; Element &lt;&lt; <span class="string">&quot; &quot;</span>; &#125;);</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt; myNums;</span><br><span class="line">	myNums.<span class="built_in">push_back</span>(<span class="number">501</span>);</span><br><span class="line">	myNums.<span class="built_in">push_back</span>(<span class="number">-1</span>);</span><br><span class="line">	myNums.<span class="built_in">push_back</span>(<span class="number">25</span>);</span><br><span class="line">	myNums.<span class="built_in">push_back</span>(<span class="number">-35</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">DisplayNums</span>(myNums);</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Sorting them in descending order&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">sort</span>(myNums.<span class="built_in">begin</span>(), myNums.<span class="built_in">end</span>(), \</span><br><span class="line">		[](<span class="type">int</span> Num1, <span class="type">int</span> Num2) &#123;<span class="built_in">return</span> (Num1 &gt; Num1); &#125;);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">DisplayNums</span>(myNums);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-6-作业"><a href="#7-6-作业" class="headerlink" title="7.6 作业"></a>7.6 作业</h2><p><strong>7.6.1 测验</strong></p>
<ol>
<li><p><strong>在函数原型中声明的变量的作用域是什么？</strong></p>
<p><strong>答</strong>：作用域仅在函数本身</p>
</li>
<li><p><strong>传递给下述函数的值有何特征？</strong></p>
<p><code>int Func(int &amp;someNumber);</code></p>
<p><strong>答</strong>：可通过someNumber修改传进来的实参</p>
</li>
<li><p><strong>调用自己的函数叫什么？</strong></p>
<p><strong>答</strong>：递归</p>
</li>
<li><p><strong>我声明了两个函数，它们的名称和返回值类型相同，但参数列表不同，这被称为什么？</strong></p>
<p><strong>答</strong>：函数重载</p>
</li>
<li><p><strong>栈指针指向栈的顶部、中间还是底部？</strong></p>
<p><strong>答</strong>：栈的顶部</p>
</li>
</ol>
<p><strong>7.6.2 练习</strong></p>
<ol>
<li><p><strong>编写两个重载函数，它们分别使用下述公式计算球和圆柱体的体积：</strong></p>
<p><strong>答</strong>：<code>double Area(double radius);</code></p>
<p>​	 <code>double Area(double radius,double height);</code></p>
</li>
<li><p><strong>编写一个函数，它将一个double数组作为参数。</strong></p>
<p><strong>答</strong>：<code>void DisplayNumbers(double doubleArray,int length);</code></p>
</li>
<li><p><strong>查错：下述代码有什么错误？</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">double</span> Pi = <span class="number">3.1416</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Area</span><span class="params">(<span class="type">double</span> radius, <span class="type">double</span> result)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	result =   Pi * radius * radius;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter radius: &quot;</span>;</span><br><span class="line">	<span class="type">double</span> radius = <span class="number">0</span>;</span><br><span class="line">	cin &gt;&gt; radius;</span><br><span class="line"></span><br><span class="line">	<span class="type">double</span> areaFetched = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">Area</span>(radius, areaFetched);</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;The Area is: &quot;</span> &lt;&lt; areaFetched &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>答</strong>：通过使用值传递的方式，用形参修改实参</p>
</li>
<li><p><strong>查错：下述函数声明有什么错误？</strong></p>
<p><code>double Area(double Pi = 3.14, double radius);</code></p>
<p><strong>答</strong>：函数的默认参数应该从右往左声明</p>
</li>
<li><p><strong>编写一个返回类型为void的函数，在提供了半径的情况下，他能帮助调用者计算圆的周长和面积</strong></p>
<p><strong>答</strong>：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">double</span> Pi = <span class="number">3.14</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Calc</span><span class="params">(<span class="type">double</span> radius, <span class="type">double</span> &amp;area, <span class="type">double</span> &amp;circumference)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    area = Pi * radius * radius;</span><br><span class="line">    circumference = <span class="number">2</span> * radius * Pi;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="第八章"><a href="#第八章" class="headerlink" title="第八章"></a>第八章</h1><h2 id="8-1-什么是指针"><a href="#8-1-什么是指针" class="headerlink" title="8.1 什么是指针"></a>8.1 什么是指针</h2><p>​	<strong>指针是存储内存地址的变量</strong></p>
<p><strong>8.1.1 声明指针</strong></p>
<ul>
<li><code>PointedType * PointerVariableName;</code></li>
<li><code>PointedType * PointerVariableName = NULL; </code></li>
</ul>
<p><strong>8.1.2 使用引用运算符（&amp;）获取变量地址</strong></p>
<p>​	<strong>如果varName是一个变量，&amp;varName将是存储该变量的地址</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单8.1 获取int变量和double变量的地址</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> age = <span class="number">30</span>;</span><br><span class="line">	<span class="type">const</span> <span class="type">double</span> Pi = <span class="number">3.1416</span>;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Integer age is localted at: 0x&quot;</span> &lt;&lt; &amp;age &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;double Pi is localted at: 0x&quot;</span> &lt;&lt; &amp;Pi &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>8.1.3 使用指针存储地址</strong></p>
<p>​	<strong>要将变量的地址存储到一个指针，需要声明一个同样的指针，并使用引用符号（&amp;）将其初始化为该变量的地址</strong></p>
<p>​	<code>Type* Pointer = &amp;Variable;</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单8.2 声明指针并初始化指针</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> age = <span class="number">30</span>;</span><br><span class="line">	<span class="type">int</span>* pointsToInt = &amp;age;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Integer age is localted at: 0x&quot;</span> &lt;&lt; hex &lt;&lt; pointsToInt &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单8.3 给指针重新赋值，使其指向另一个变量</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> age = <span class="number">30</span>;</span><br><span class="line">	<span class="type">int</span>* pointsToInt = &amp;age;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;pointsToInt points to age now&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;pointaToInt = 0x&quot;</span> &lt;&lt; hex &lt;&lt; pointsToInt &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> dogsAge = <span class="number">9</span>;</span><br><span class="line">	pointsToInt = &amp;dogsAge;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;pointsToInt points to dogsAge now&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;pointaToInt = 0x&quot;</span> &lt;&lt; hex &lt;&lt; pointsToInt &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>8.1.4 使用解除引用运算符（*）访问指向的数据</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单8.4 使用解除引用运算符(*)来访问整数值</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> age = <span class="number">30</span>;</span><br><span class="line">	<span class="type">int</span> dogsAge = <span class="number">9</span>;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Interger age = &quot;</span> &lt;&lt; age &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Interger dogsAge = &quot;</span> &lt;&lt; hex &lt;&lt; dogsAge &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span>* pointsToInt = &amp;age;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;pintersToint points to age&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;pointsToInt = 0x&quot;</span> &lt;&lt; hex &lt;&lt; pointsToInt &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;*pointsToInt = &quot;</span> &lt;&lt; dec &lt;&lt; *pointsToInt &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	pointsToInt = &amp;dogsAge;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;pintersToint points to dogsAge&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;pointsToInt = 0x&quot;</span> &lt;&lt; hex &lt;&lt; pointsToInt &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;*pointsToInt = &quot;</span> &lt;&lt; dec &lt;&lt; *pointsToInt &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单8.5 使用指针和解除引用运算符操作数据</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> dogsAge = <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Initialized dogsAge = &quot;</span> &lt;&lt; dogsAge &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span>* pointesToAnAGe = &amp;dogsAge;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;pointsToAnAge points to dogsAge&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter an age for your dog: &quot;</span>;</span><br><span class="line">	cin &gt;&gt; *pointesToAnAGe;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Input stored at 0x&quot;</span> &lt;&lt; hex &lt;&lt; pointesToAnAGe &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Integer dogsAge = &quot;</span> &lt;&lt; dec &lt;&lt; dogsAge &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>8.1.5 将sizeof()用于指针的结果</strong></p>
<ul>
<li>32位：sizeof结果为4</li>
<li>64位：sizeof结果为8</li>
</ul>
<h2 id="8-2-动态分配内存"><a href="#8-2-动态分配内存" class="headerlink" title="8.2 动态分配内存"></a>8.2 动态分配内存</h2><p><strong>8.2.1 使用new和delete动态分配内存和释放内存</strong></p>
<ol>
<li><p>分配和释放一个元素</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Type* Pointer = <span class="keyword">new</span> Type;</span><br><span class="line"><span class="keyword">delete</span> Pointer;</span><br></pre></td></tr></table></figure>
</li>
<li><p>分配和释放多个元素</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Type* Pointer = <span class="keyword">new</span> Tyoe[numElements];</span><br><span class="line"><span class="keyword">delete</span>[] Pointer;</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>8.2.2 将递增和递减运算符（++和–）用于指针的结果</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单8.9 使用偏移量和运算符来递增和递减指针</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;How many integers you wish to enter?&quot;</span>;</span><br><span class="line">	<span class="type">int</span> numEntries = <span class="number">0</span>;</span><br><span class="line">	cin &gt;&gt; numEntries;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span>* pointsToInts = <span class="keyword">new</span> <span class="type">int</span>[numEntries];</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Allocated for &quot;</span> &lt;&lt; numEntries &lt;&lt; <span class="string">&quot;integers&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> counter = <span class="number">0</span>; counter &lt; numEntries; ++counter) &#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;Enter number&quot;</span> &lt;&lt; counter &lt;&lt; <span class="string">&quot;: &quot;</span>;</span><br><span class="line">		cin &gt;&gt; *(pointsToInts + counter);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Displaying all numbers entered: &quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> counter = <span class="number">0</span>; counter &lt; numEntries; ++counter) &#123;</span><br><span class="line">		cout &lt;&lt; *(pointsToInts++) &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	pointsToInts -= numEntries;</span><br><span class="line">	<span class="keyword">delete</span>[] pointsToInts;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>8.2.3 将关键字用于const用于指针</strong></p>
<ul>
<li><p>指针包含的地址是常量，不能修改指针指向的数据：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> daysInMonrh = <span class="number">30</span>;</span><br><span class="line"><span class="type">int</span>* <span class="type">const</span> pDaysInMonth = &amp;daysInMonrh;</span><br><span class="line">*pDaysInMonth = <span class="number">31</span>;</span><br><span class="line"><span class="type">int</span> daysInLunarMonth = <span class="number">28</span>;</span><br><span class="line">pDaysInMonth = &amp;daysInLunarMonth; <span class="comment">//error,Cannot change address</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>指针指向的数据为常量，不能修改，但可以修改指针包含的地址，即指针可以指向其地方</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> hoursInDay = <span class="number">24</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span>* pointsToInt = &amp;hoursInDay;</span><br><span class="line"><span class="type">int</span> monthsInYear = <span class="number">12</span>;</span><br><span class="line">pointsToInt = &amp;monthsInYear;</span><br><span class="line">*pointsToInt = <span class="number">13</span>; <span class="comment">//error ,Cannot change data being pointed to</span></span><br><span class="line"><span class="type">int</span>* newPointer = pointsToInt; <span class="comment">// error, Cannot assign const to non-const</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>指针包含的地址以及它指向的值都是常量，不能修改（这种最严格）</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> hoursInDay = <span class="number">24</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span>* <span class="type">const</span> pHourInDay = &amp;hoursInDay;</span><br><span class="line">*pHourInDay = <span class="number">25</span>; <span class="comment">//error, Cannot change data being pointed to</span></span><br><span class="line"><span class="type">int</span> daysInMonth = <span class="number">30</span>;</span><br><span class="line">pHourInDay = &amp;daysInMonth; <span class="comment">//error, Cannot change address</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>8.2.4 将指针传递给函数</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单8.10 在计算圆面积的函数使用关键字const</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CalcArea</span><span class="params">(<span class="type">const</span> <span class="type">double</span>* <span class="type">const</span> ptrPi,</span></span></span><br><span class="line"><span class="params"><span class="function">	<span class="type">const</span> <span class="type">double</span>* <span class="type">const</span> ptrRadius,</span></span></span><br><span class="line"><span class="params"><span class="function">	<span class="type">double</span>* <span class="type">const</span> ptrArea)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (ptrPi &amp;&amp; ptrRadius &amp;&amp; ptrArea) &#123;</span><br><span class="line">		*ptrArea = (*ptrPi) * (*ptrRadius) * (*ptrRadius);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">const</span> <span class="type">double</span> Pi = <span class="number">3.1416</span>;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter radius of circle: &quot;</span>;</span><br><span class="line">	<span class="type">double</span> radius = <span class="number">0</span>;</span><br><span class="line">	cin &gt;&gt; radius;</span><br><span class="line"></span><br><span class="line">	<span class="type">double</span> area = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">CalcArea</span>(&amp;Pi, &amp;radius, &amp;area);</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Area is = &quot;</span> &lt;&lt; area &lt;&lt; endl;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>8.2.5 数组和指针的类似之处</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单 8.11 数组变量是指向第一个元素的指针</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> myNumbers[<span class="number">5</span>];</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span>* pointToNums = myNumbers;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;pointToNums = 0x&quot;</span> &lt;&lt; hex &lt;&lt; pointToNums &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;&amp;myNumbers[0] = 0x&quot;</span> &lt;&lt; hex &lt;&lt; &amp;myNumbers[<span class="number">0</span>] &lt;&lt; endl;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单8.12 使用解除引用运算符（*）访问数组中的元素以及将数组运算符（[]）用于指针</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">const</span> <span class="type">int</span> ARRAY_LEN = <span class="number">5</span>;</span><br><span class="line">	<span class="type">int</span> myNumbers[ARRAY_LEN] = &#123; <span class="number">24</span>,<span class="number">-1</span>,<span class="number">365</span>,<span class="number">-999</span>,<span class="number">2011</span> &#125;;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span>* pointToNums = myNumbers;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;pointToNums = 0x&quot;</span> &lt;&lt; hex &lt;&lt; pointToNums &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;&amp;myNumbers[0] = 0x&quot;</span> &lt;&lt; hex &lt;&lt; &amp;myNumbers[<span class="number">0</span>] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Display array using pointer syntax, operator*&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> index = <span class="number">0</span>; index &lt; ARRAY_LEN; index++) &#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;Element &quot;</span> &lt;&lt; index &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; *(myNumbers + index) &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Display array using ptr with array syntax, operator[]&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> index = <span class="number">0</span>; index &lt; ARRAY_LEN; index++) &#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;Element &quot;</span> &lt;&lt; index &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; pointToNums[index] &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="8-5-引用是什么"><a href="#8-5-引用是什么" class="headerlink" title="8.5 引用是什么"></a>8.5 引用是什么</h2><p>​	<strong>引用是变量的别名。声明时，需要将初始化为一个变量</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">VarType original = value;</span><br><span class="line">VarType ReferenceVarialbe = original;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单 8.17 引用是相应变量的别名</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> original = <span class="number">30</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;original = &quot;</span> &lt;&lt; original &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;original = &quot;</span> &lt;&lt; hex &lt;&lt; &amp;original &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span>&amp; ref1 = original;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;ref1 is at address: &quot;</span> &lt;&lt; hex &lt;&lt; &amp;ref1 &lt;&lt; endl;</span><br><span class="line">	</span><br><span class="line">	<span class="type">int</span>&amp; ref2 = ref1;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;ref2 is at address: &quot;</span> &lt;&lt; hex &lt;&lt; &amp;ref2 &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Therefore, ref2 = &quot;</span> &lt;&lt; dec &lt;&lt; ref2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>8.5.1 是什么让引用很有用</strong></p>
<p>​	<strong>可以在函数调用实参时避免复制这个步骤</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//可避免复制步骤的函数版本类似下面这样：</span></span><br><span class="line"><span class="function">ReturnType <span class="title">DoSomething</span><span class="params">(Type&amp; parameter)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用如下</span></span><br><span class="line">ReturnType Result = <span class="built_in">Dosomething</span>(argument);</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单8.18 一个计算平方值通过引用参数返回结果的函数</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">GetSquare</span><span class="params">(<span class="type">int</span>&amp; number)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	number *= number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter a number you wish to square: &quot;</span>;</span><br><span class="line">	<span class="type">int</span> number = <span class="number">0</span>;</span><br><span class="line">	cin &gt;&gt; number;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">GetSquare</span>(number);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Square is: &quot;</span> &lt;&lt; number &lt;&lt; endl;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>8.5.2 将关键字const用于引用</strong></p>
<p>​	<strong>须要禁止通过引用修改它的指向变量的值，为此可在声明引用时使用关键字const：</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> original = <span class="number">30</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span>&amp; constRef = original;</span><br><span class="line">constRef = <span class="number">40</span>; <span class="comment">//error: constRef can&#x27;t change value in original</span></span><br><span class="line"><span class="type">int</span>&amp; ref = constRef; <span class="comment">//error: ref2 is not const</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span>&amp; constRef2 = constRef;</span><br></pre></td></tr></table></figure>

<p><strong>按引用向函数传递参数</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单8.19 使用const引用确保被调用的函数</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">GetSquare</span><span class="params">(<span class="type">const</span> <span class="type">int</span>&amp; number, <span class="type">int</span> &amp;result)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	result = number * number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Enter a number you wish to square: &quot;</span>;</span><br><span class="line">	<span class="type">int</span> number = <span class="number">0</span>;</span><br><span class="line">	cin &gt;&gt; number;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> square = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">GetSquare</span>(number, square);</span><br><span class="line">	cout &lt;&lt; number &lt;&lt; <span class="string">&quot;^2 = &quot;</span> &lt;&lt; square &lt;&lt; endl;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="8-5-作业"><a href="#8-5-作业" class="headerlink" title="8.5 作业"></a>8.5 作业</h2><p><strong>8.8.1 测验</strong></p>
<ol>
<li><p><strong>为何不能将const引用赋给非const引用</strong></p>
<p><strong>答</strong>：防止非const引用修改const引用的值</p>
</li>
<li><p><strong>new和delete是函数吗？</strong></p>
<p><strong>答</strong>：是关键字</p>
</li>
<li><p><strong>指针变量包含的值有何特征？</strong></p>
<p><strong>答</strong>：变量地址</p>
</li>
<li><p><strong>要访问指针指向的数据，应使用哪种运算符？</strong></p>
<p><strong>答</strong>：解引用运算符（*）</p>
</li>
</ol>
<p><strong>8.8.2 练习</strong></p>
<ol>
<li><p><strong>下面的语句显示什么</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> number = <span class="number">3</span>;</span><br><span class="line"><span class="type">int</span> *pNum1 = &amp;number;</span><br><span class="line">*pNum1 = <span class="number">20</span>;</span><br><span class="line"><span class="type">int</span> *PNum2 = pNum1;</span><br><span class="line">number *= <span class="number">2</span>;</span><br><span class="line">cout &lt;&lt; *pNum2;</span><br></pre></td></tr></table></figure>

<p><strong>答</strong>：40</p>
</li>
<li><p>**下面三个重载的函数有何相同和不同之处？ **</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">DoSomething</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">DoSomething</span><span class="params">(<span class="type">int</span>&amp; num1, <span class="type">int</span>&amp; num2)</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">DoSomething</span><span class="params">(<span class="type">int</span>* num1, <span class="type">int</span>* num2)</span></span>;</span><br></pre></td></tr></table></figure>

<p><strong>答</strong>：  </p>
<ol>
<li><strong>相同之处</strong><ul>
<li>函数名相同</li>
<li>功能相似</li>
<li>返回值相同</li>
</ul>
</li>
<li><strong>不同之处</strong><ul>
<li>参数不同</li>
<li>调用方式不同</li>
<li>对参数的影响</li>
<li>使用场景不同</li>
</ul>
</li>
</ol>
</li>
<li><p><strong>要让练习1中第3行的赋值非法，应如何修改第1行中pNum1的声明（提示：让pNum1不能 修改它指向的数据）？</strong></p>
<p><strong>答</strong>：添加const关键字</p>
</li>
<li><p><strong>查错：下面的代码有何错误？</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span>* pointToAnInt = <span class="keyword">new</span> <span class="type">int</span>;</span><br><span class="line">	pointToAnInt = <span class="number">9</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;The value at pointToAnInt: &quot;</span> &lt;&lt; *pointToAnInt &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">delete</span> pointToAnInt;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>答</strong>：没有使用解引用运算符（*）就直接对pointToAnInt操作</p>
</li>
<li><p><strong>查错：下面的代码有何错误？</strong>  </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span>* pointToAnInt = <span class="keyword">new</span> <span class="type">int</span>;</span><br><span class="line">	<span class="type">int</span> * pNumberCopy = pointToAnInt;</span><br><span class="line">	*pNumberCopy = <span class="number">30</span>;</span><br><span class="line">	cout &lt;&lt; *pointToAnInt;</span><br><span class="line">	<span class="keyword">delete</span> pNumberCopy;</span><br><span class="line">	<span class="keyword">delete</span> pointToAnInt;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>答</strong>：对同一块内存重复释放；  </p>
</li>
<li><p><strong>修正练习5的代码后，其输出是什么？</strong></p>
<p><strong>答</strong>：30</p>
</li>
</ol>
<h1 id="第九章"><a href="#第九章" class="headerlink" title="第九章"></a>第九章</h1><h2 id="9-1-类和对象"><a href="#9-1-类和对象" class="headerlink" title="9.1 类和对象"></a>9.1 类和对象</h2><p><strong>9.14 使用指针运算符（-&gt;）访问成员</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单 一个值得编译的Human类</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Human</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	string name;</span><br><span class="line">	<span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">IntroduceSelf</span><span class="params">()</span> </span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;I am&quot;</span> + name &lt;&lt; <span class="string">&quot; and am &quot;</span> &lt;&lt; age &lt;&lt; <span class="string">&quot; years old&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Human firstMan;</span><br><span class="line">	firstMan.name = <span class="string">&quot;Adam&quot;</span>;</span><br><span class="line">	firstMan.age = <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line">	Human firstWoman;</span><br><span class="line">	firstWoman.name = <span class="string">&quot;Eve&quot;</span>;</span><br><span class="line">	firstWoman.age = <span class="number">28</span>;</span><br><span class="line"></span><br><span class="line">	firstMan.<span class="built_in">IntroduceSelf</span>();</span><br><span class="line">	firstWoman.<span class="built_in">IntroduceSelf</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9-2-关键字public和private"><a href="#9-2-关键字public和private" class="headerlink" title="9.2 关键字public和private"></a>9.2 关键字public和private</h2><p><strong>9.2.1 使用关键字private实现数据抽象</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单9.2 一个对外隐藏真实年龄并将自己说的更年轻的Human类</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Human</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SetAge</span><span class="params">(<span class="type">int</span> inputAge)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		age = inputAge;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">GetAge</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (age &gt; <span class="number">30</span>) <span class="keyword">return</span> (age - <span class="number">2</span>);</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Human firstMan;</span><br><span class="line">	firstMan.<span class="built_in">SetAge</span>(<span class="number">35</span>);</span><br><span class="line">	</span><br><span class="line">	Human firstWoman;</span><br><span class="line">	firstWoman.<span class="built_in">SetAge</span>(<span class="number">22</span>);</span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Age of firstMan &quot;</span> &lt;&lt; firstMan.<span class="built_in">GetAge</span>() &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Age of firstWoman &quot;</span> &lt;&lt; firstWoman.<span class="built_in">GetAge</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9-3-构造函数"><a href="#9-3-构造函数" class="headerlink" title="9.3 构造函数"></a>9.3 构造函数</h2><p><strong>9.3.1 声明和实现构造函数</strong></p>
<p>​	<strong>构造函数是一种特殊的函数，他与类同名且不返回任何值，Human类的构造函数的声明类似于下面这样</strong>  </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Human</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Human</span>(); <span class="comment">//constuctor declaration</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>​	<strong>构造函数可在类声明中实现</strong>  </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Human</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Human</span>()</span><br><span class="line">    &#123;</span><br><span class="line">    	<span class="comment">//constructor code here</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>​	<strong>在类声明外定义构造函数</strong>  </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Human</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Human</span>(); <span class="comment">//constuctor declaration</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Human::<span class="built_in">Human</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//constructor code here</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>9.3.2 何时及如何使用构造函数</strong></p>
<p>​	<strong>构造函数总是在创建对象时被调用，这让构造函数成为将类成员变量初始化为选定值的理想场所</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//9.3 使用构造函数初始化类成员变量</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Human</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Human</span>()</span><br><span class="line">	&#123;</span><br><span class="line">		age = <span class="number">1</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;Constructed an instance of class Human&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SetName</span><span class="params">(string humansNmae)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		name = humansNmae;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SetAge</span><span class="params">(<span class="type">int</span> humansAge)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		age = humansAge;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">IntroduceSelf</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;I am &quot;</span> + name &lt;&lt; <span class="string">&quot; and am &quot;</span> &lt;&lt; age &lt;&lt; <span class="string">&quot; years old&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	string name;</span><br><span class="line">	<span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Human firstWoman;</span><br><span class="line">	firstWoman.<span class="built_in">SetName</span>(<span class="string">&quot;Eve&quot;</span>);</span><br><span class="line">	firstWoman.<span class="built_in">SetAge</span>(<span class="number">28</span>);</span><br><span class="line"></span><br><span class="line">	firstWoman.<span class="built_in">IntroduceSelf</span>();</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>9.3.3 重载构造函数</strong></p>
<p>​	<strong>与函数一样，构造函数也可以重载</strong>  </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//9.4 包含多个构造函数的Human类</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Human</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Human</span>()</span><br><span class="line">	&#123;</span><br><span class="line">		age = <span class="number">1</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;Default Constructor: name and age not set&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">Human</span>(string humansName, <span class="type">int</span> humansAge)</span><br><span class="line">	&#123;</span><br><span class="line">		name = humansName;</span><br><span class="line">		age = humansAge;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;Overloaded constructor creates &quot;</span>;</span><br><span class="line">		cout &lt;&lt; name &lt;&lt; <span class="string">&quot; of &quot;</span> &lt;&lt; age &lt;&lt; <span class="string">&quot; years &quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	string name;</span><br><span class="line">	<span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Human firstMan;</span><br><span class="line">	<span class="function">Human <span class="title">firstWoman</span><span class="params">(<span class="string">&quot;Eve&quot;</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>9.3.4 没有默认构造函数的类</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//9.5 一个有重载的构造函数，但没有默认的构造函数的类</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Human</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Human</span>(string humansName, <span class="type">int</span> humansAge)</span><br><span class="line">	&#123;</span><br><span class="line">		name = humansName;</span><br><span class="line">		age = humansAge;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;Overloaded constructor creates &quot;</span>;</span><br><span class="line">		cout &lt;&lt; name &lt;&lt; <span class="string">&quot; of &quot;</span> &lt;&lt; age &lt;&lt; <span class="string">&quot; years &quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">IntroduceSelf</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;I am &quot;</span> + name &lt;&lt; <span class="string">&quot; and am&quot;</span> &lt;&lt; age &lt;&lt; <span class="string">&quot; years old&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	string name;</span><br><span class="line">	<span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">Human <span class="title">firstMan</span><span class="params">(<span class="string">&quot;Adam&quot;</span>, <span class="number">25</span>)</span></span>;</span><br><span class="line">	<span class="function">Human <span class="title">firstWoman</span><span class="params">(<span class="string">&quot;Eve&quot;</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line">	</span><br><span class="line">	firstMan.<span class="built_in">IntroduceSelf</span>();</span><br><span class="line">	firstWoman.<span class="built_in">IntroduceSelf</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>9.3.5 带默认值的构造函数参数</strong></p>
<p>​	<strong>就像函数可以带有默认值的参数一样，构造函数也可以</strong>  </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Human</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Human</span>(string humansName, <span class="type">int</span> humansAge = <span class="number">25</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		name = humansName;</span><br><span class="line">		age = humansAge;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;Overloaded constructor creates &quot;</span>;</span><br><span class="line">		cout &lt;&lt; name &lt;&lt; <span class="string">&quot; of &quot;</span> &lt;&lt; age &lt;&lt; <span class="string">&quot; years &quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">IntroduceSelf</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;I am &quot;</span> + name &lt;&lt; <span class="string">&quot; and am&quot;</span> &lt;&lt; age &lt;&lt; <span class="string">&quot; years old&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	string name;</span><br><span class="line">	<span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>9.3.6 包含初始化列表的构造函数</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单9.6 接受带默认值的参数的默认构造函数，并使用初始化列表来设置成员</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Human</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Human</span>(string humansName = <span class="string">&quot;Adam&quot;</span>, <span class="type">int</span> humansAge = <span class="number">25</span>) </span><br><span class="line">		: <span class="built_in">name</span>(humansName),<span class="built_in">age</span>(humansAge)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;Overloaded constructor creates &quot;</span>;</span><br><span class="line">		cout &lt;&lt; name &lt;&lt; <span class="string">&quot; of &quot;</span> &lt;&lt; age &lt;&lt; <span class="string">&quot; years &quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	string name;</span><br><span class="line">	<span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Human firstMan;</span><br><span class="line">	<span class="function">Human <span class="title">firstWoman</span><span class="params">(<span class="string">&quot;Eve&quot;</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​	<strong>也可以使用constexpr关键字将构造函数定义为常量表达式</strong>  </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Sample</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span>* someString;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">constexpr</span> <span class="title">Sample</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* input)</span> : someString(input)</span></span><br><span class="line"><span class="function">    &#123;</span></span><br><span class="line">        <span class="comment">//constructor code</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="9-4-析构函数"><a href="#9-4-析构函数" class="headerlink" title="9.4 析构函数"></a>9.4 析构函数</h2><p>​	<strong>析构函数看起来像一个类同名的函数，但前面有一个腭化符号（~）。因此Human类的析构函数声明如下</strong>  </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Human</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    ~<span class="built_in">Human</span>(); <span class="comment">//declaration of a destructor</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>​	<strong>类中声明实现</strong>  </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Human</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    ~<span class="built_in">Human</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//destructor code here</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>​	<strong>在类声明外定义</strong>  </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Human</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    ~<span class="built_in">Human</span>(); <span class="comment">//declaration of a destructor</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Human::~<span class="built_in">Human</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//destructor code here</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>9.4.2 何时及如何使用析构函数</strong></p>
<p>​	<strong>每当对象不在作用域内或通过delete被删除进而被销毁时，都讲调用析构函数。这使得析构函数称为重置变量以及释放动态分配的内存和其他资源的理想场所</strong>  </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单9.7 一个简单的类，它封装了字符缓冲区并通过析构函数释放它</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyString</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">MyString</span>(<span class="type">const</span> <span class="type">char</span>* initString)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (initString != <span class="literal">NULL</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			buffer = <span class="keyword">new</span> <span class="type">char</span>[<span class="built_in">strlen</span>(initString) + <span class="number">1</span>];</span><br><span class="line">			<span class="built_in">strcpy</span>(buffer, initString);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			buffer = <span class="literal">NULL</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	~<span class="built_in">MyString</span>()</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;Invoking destructor, clearing up&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">GetLength</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">strlen</span>(buffer);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">const</span> <span class="type">char</span>* <span class="title">GetString</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> buffer;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">char</span>* buffer;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">MyString <span class="title">sayHello</span><span class="params">(<span class="string">&quot;Hello from String Class&quot;</span>)</span></span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;String buffer in sayHello is  &quot;</span> &lt;&lt; sayHello.<span class="built_in">GetLength</span>() &lt;&lt; <span class="string">&quot; characters long&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Buffer contains: &quot;</span> &lt;&lt; sayHello.<span class="built_in">GetString</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9-5-复制构造函数"><a href="#9-5-复制构造函数" class="headerlink" title="9.5 复制构造函数"></a>9.5 复制构造函数</h2><p><strong>9.5.1 浅复制及其存在的问题</strong></p>
<p>​	<strong>复制类的对象时，将复制其指针成员，但不复制指针指向的缓冲区，其结果是两个对象指向同一个动态分配的内存。销毁其中的一个对象时，导致另一个对象存储的指针拷贝无效。这种复制被称为浅复制</strong>  </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单9.7  按值传递类的对象带来的问题</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyString</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">MyString</span>(<span class="type">const</span> <span class="type">char</span>* initString)</span><br><span class="line">	&#123;</span><br><span class="line">		buffer = <span class="literal">NULL</span>;</span><br><span class="line">		<span class="keyword">if</span> (initString != <span class="literal">NULL</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			buffer = <span class="keyword">new</span> <span class="type">char</span>[<span class="built_in">strlen</span>(initString) + <span class="number">1</span>];</span><br><span class="line">			<span class="built_in">strcpy</span>(buffer, initString);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	~<span class="built_in">MyString</span>()</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;Invoking destructor, clearing up&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">delete</span>[] buffer;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">GetLength</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">strlen</span>(buffer);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">const</span> <span class="type">char</span>* <span class="title">GetString</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> buffer;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">char</span>* buffer;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UseMyString</span><span class="params">(MyString str)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;String buffer in MyString is &quot;</span> &lt;&lt; str.<span class="built_in">GetLength</span>() &lt;&lt; <span class="string">&quot; characters long&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;buffer contains: &quot;</span> &lt;&lt; str.<span class="built_in">GetLength</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">MyString <span class="title">sayHello</span><span class="params">(<span class="string">&quot;Hello from String Class&quot;</span>)</span></span>;</span><br><span class="line">	<span class="built_in">UseMyString</span>(sayHello);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>9.5.2 使用复制构造函数确保深复制</strong></p>
<p>​	<strong>复制构造函数是一个重载的构造函数，由编写类的程序员提供。每当对象被复制时，编译器都将调用复制构造函数</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyString</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">MyString</span>(<span class="type">const</span> MyString&amp; copySource);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">MyString::<span class="built_in">MyString</span>(<span class="type">const</span> MyString&amp; copySource)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//Copy constructor implementation code</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单9.9 定义一个复制构造函数，确保对动态分配的缓冲区进行深复制</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyString</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">MyString</span>(<span class="type">const</span> <span class="type">char</span>* initString)</span><br><span class="line">	&#123;</span><br><span class="line">		buffer = <span class="literal">NULL</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;Default constructor: creating new MyString&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">if</span> (initString != <span class="literal">NULL</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			buffer = <span class="keyword">new</span> <span class="type">char</span>[<span class="built_in">strlen</span>(initString) + <span class="number">1</span>];</span><br><span class="line">			<span class="built_in">strcpy</span>(buffer, initString);</span><br><span class="line"></span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;buffer points to: 0x&quot;</span> &lt;&lt; (<span class="type">unsigned</span> <span class="type">int</span>*)buffer &lt;&lt; endl;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">MyString</span>(<span class="type">const</span> MyString&amp; copySource)</span><br><span class="line">	&#123;</span><br><span class="line">		buffer = <span class="literal">NULL</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;Copy constructor: copying from MyString&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">if</span> (copySource.buffer != <span class="literal">NULL</span>)&#123;</span><br><span class="line">			buffer = <span class="keyword">new</span> <span class="type">char</span>[<span class="built_in">strlen</span>(copySource.buffer) + <span class="number">1</span>];</span><br><span class="line">			<span class="built_in">strcpy</span>(buffer, copySource.buffer);</span><br><span class="line"></span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;buffer points to:0x&quot;</span> &lt;&lt; hex &lt;&lt; (<span class="type">unsigned</span> <span class="type">int</span>*)buffer &lt;&lt; endl;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	~<span class="built_in">MyString</span>()</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;Invoking destructor, clearing up&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">delete</span>[] buffer;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">GetLength</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">strlen</span>(buffer);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">const</span> <span class="type">char</span>* <span class="title">GetString</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> buffer;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">char</span>* buffer;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UseMyString</span><span class="params">(MyString str)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;String buffer in MyString is &quot;</span> &lt;&lt; str.<span class="built_in">GetLength</span>() &lt;&lt; <span class="string">&quot; characters long&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;buffer contains: &quot;</span> &lt;&lt; str.<span class="built_in">GetLength</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">MyString <span class="title">sayHello</span><span class="params">(<span class="string">&quot;Hello from String Class&quot;</span>)</span></span>;</span><br><span class="line">	<span class="built_in">UseMyString</span>(sayHello);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>9.5.3 有助于改善性能的移动构造函数</strong></p>
<p>​	<strong>移动构造函数的语法</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">MyString</span>(MyString&amp;&amp; moveSource)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span>(moveSource.buffer != <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        buffer = moveSource.buffer;</span><br><span class="line">        moveSource.buffer = <span class="literal">NULL</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9-6-构造函数和析构函数的其他用途"><a href="#9-6-构造函数和析构函数的其他用途" class="headerlink" title="9.6 构造函数和析构函数的其他用途"></a>9.6 构造函数和析构函数的其他用途</h2><p><strong>9.6.1 不允许复制的类</strong></p>
<p>​	<strong>要禁止类对象被复制，可声明一个私有的复制构造函数。确保函数调用无法通过编译。为禁止复制，可声明一个私有的赋值运算符</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">President</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">President</span>(<span class="type">const</span> President&amp;);</span><br><span class="line">    <span class="function">President&amp; <span class="title">operator</span><span class="params">(<span class="type">const</span> President&amp;)</span></span>;</span><br><span class="line">    <span class="comment">//... other attributes</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>9.6.2 只能有一个实列的单例类</strong></p>
<p>​	<strong>要创建单例类，关键字static必不可少</strong>  </p>
<ul>
<li>static用于类的数据成员时，该数据成员将在所有实例之间共享</li>
<li>static用于函数中声明的局部变量时，该变量的值将在两次调用之间保持不变</li>
<li>static用于成员函数时，该方法将在所有成员之间共享</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单9.10 单例类President, 它禁止复制、赋值及创建多个实例</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">President</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="built_in">President</span>() &#123;&#125;; <span class="comment">//private default constructor</span></span><br><span class="line">	<span class="built_in">President</span>(<span class="type">const</span> President&amp;); <span class="comment">//private copy constructor</span></span><br><span class="line">	<span class="type">const</span> President&amp; <span class="keyword">operator</span>=(<span class="type">const</span> President&amp;);<span class="comment">//assignment operator</span></span><br><span class="line"></span><br><span class="line">	string name;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">static</span> President&amp; <span class="title">GetInstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="comment">//static objects are constructor only once</span></span><br><span class="line">		<span class="type">static</span> President onlyInstance;</span><br><span class="line">		<span class="keyword">return</span> onlyInstance;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function">string <span class="title">GetName</span><span class="params">()</span> </span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SetName</span><span class="params">(string InputName)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		name = InputName;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	President&amp; onlyPresident = President::<span class="built_in">GetInstance</span>();</span><br><span class="line">	onlyPresident.<span class="built_in">SetName</span>(<span class="string">&quot;Abraham Lincoln&quot;</span>);</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;The name of the President is: &quot;</span> &lt;&lt; President::<span class="built_in">GetInstance</span>().<span class="built_in">GetName</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>9.6.3 禁止在栈中实例化的类</strong></p>
<p>​	<strong>可声明一个私有的析构函数</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单 9.11 数据库类monsterDB,只能使用new在自由存储区创建其对象</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MonsterDB</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	~<span class="built_in">MonsterDB</span>() &#123;&#125;;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">DestroyInstance</span><span class="params">(MonsterDB* pInstance)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">delete</span> pInstance;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">Dosomething</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	MonsterDB* myDB = <span class="keyword">new</span> <span class="built_in">MonsterDB</span>();</span><br><span class="line">	myDB-&gt;DestroyInstance;</span><br><span class="line"></span><br><span class="line">	myDB-&gt;<span class="built_in">DestroyInstance</span>(myDB);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>9.6.4 使用构造函数进行类型转换</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单 使用explicit避免无意间的隐式转换</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Human</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> age;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">explicit</span> <span class="title">Human</span><span class="params">(<span class="type">int</span> humansAge)</span> : age(humansAge)&#123;</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DoSomething</span><span class="params">(Human person)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Human sent did something&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">Human <span class="title">kid</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line">	Human anotherKid = <span class="built_in">Human</span>(<span class="number">11</span>);</span><br><span class="line">	<span class="built_in">DoSomething</span>(kid);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//Human anotherKid2 = 11; //failure: implicit conversion not OK</span></span><br><span class="line">	<span class="comment">//DoSomething(10); //implicit conversion</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9-10-声明友元"><a href="#9-10-声明友元" class="headerlink" title="9.10 声明友元"></a>9.10 声明友元</h2><p>​	<strong>不能从外部访问类的私有数据成员和方法，但这条规则不适用于友元类和友元函数。要声明友元函数或友元类，可使用friend关键字</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单 9.14 使用friend关键字让外部函数DisplayAge()能够访问私有数据成员</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Human</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">DisplayAge</span><span class="params">(<span class="type">const</span> Human&amp; person)</span></span>;</span><br><span class="line">	string name;</span><br><span class="line">	<span class="type">int</span> age;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">explicit</span> <span class="title">Human</span><span class="params">(string HumansName,<span class="type">int</span> humansAge)</span> :name(HumansName), age(humansAge)&#123;</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DisplayAge</span><span class="params">(<span class="type">const</span> Human&amp; person)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; person.age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">Human <span class="title">firstMan</span><span class="params">(<span class="string">&quot;Adam&quot;</span>, <span class="number">25</span>)</span></span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Accessing private member age via friend function: &quot;</span>;</span><br><span class="line">	<span class="built_in">DisplayAge</span>(firstMan);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序清单 9.14 使用friend关键字让外部l类Utility能够访问私有数据成员</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Human</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">friend</span> <span class="keyword">class</span> <span class="title class_">Utility</span>;</span><br><span class="line">	string name;</span><br><span class="line">	<span class="type">int</span> age;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">explicit</span> <span class="title">Human</span><span class="params">(string HumansName,<span class="type">int</span> humansAge)</span> :name(HumansName), age(humansAge)&#123;</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Utility</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">DisplayAge</span><span class="params">(<span class="type">const</span> Human&amp; person)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout &lt;&lt; person.age &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">Human <span class="title">firstMan</span><span class="params">(<span class="string">&quot;Adam&quot;</span>, <span class="number">25</span>)</span></span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Accessing private member age via friend class: &quot;</span>;</span><br><span class="line">	Utility::<span class="built_in">DisplayAge</span>(firstMan);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9-15-作业"><a href="#9-15-作业" class="headerlink" title="9.15 作业"></a>9.15 作业</h2><p><strong>9.15.1 测验</strong></p>
<ol>
<li><p><strong>使用new创建类实例时，将在什么地方创建它？</strong></p>
<p><strong>答</strong>：堆区</p>
</li>
<li><p><strong>我的类包含一个原始指针int*，它指向一个动态分配的int 数组。请问将sizeof 用于这个类的 对象时，结果是否取决于该动态数组包含的元素数？</strong></p>
<p><strong>答</strong>：否</p>
</li>
<li><p><strong>假设有一个类，其所有成员都是私有的，且没有友元类和友元函数。请问谁能访问这些成员？</strong></p>
<p><strong>答</strong>：设置成员函数get和set方法</p>
</li>
<li><p><strong>可以在一个类成员方法中调用另一个成员方法吗？</strong></p>
<p><strong>答</strong>：可以</p>
</li>
<li><p><strong>构造函数适合做什么？</strong></p>
<p><strong>答</strong>：初始化成员变量</p>
</li>
<li><p><strong>构造函数适合做什么？</strong></p>
<p><strong>答</strong>：重置变量以及释放动态分配的内存</p>
</li>
</ol>
<p><strong>9.15.2 练习</strong></p>
<ol>
<li><p><strong>查错：下面的类声明有什么错误？</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Class Human</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    string name;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Human</span>()&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>答</strong>：类声明关键字错误且没有声明完成后加上分号</p>
</li>
<li><p><strong>练习1所示类的用户如何访问成员Human::age？</strong></p>
<p><strong>答</strong>：1.使用友元函数进行访问</p>
<p>​		2.设置成员函数get和set方法</p>
</li>
<li><p>**对练习1中的类进行修改，在构造函数中使用初始化列表对所有参数进行初始化。 **</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Human</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    string name;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Human</span>(string humansName,<span class="type">int</span> humansAge):age&#123;humansAge&#125;,name&#123;humansName&#125;&#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>编写一个 Circle 类，它根据实例化时提供的半径计算面积和周长。将 Pi 包含在一个私有成员 常量中，该常量不能在类外访问。</strong>  </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Circle</span>(<span class="type">double</span> r = <span class="number">0</span>) : radius&#123;r&#125;&#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">double</span> <span class="title">GetArea</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> radius * radius * Pi;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">double</span> <span class="title">GetCircumference</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">2</span> * radius * Pi;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">double</span> radius;</span><br><span class="line">	<span class="type">const</span> <span class="type">double</span> Pi = <span class="number">3.14</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/12/22/21%E5%A4%A9%E5%AD%A6%E9%80%9AC-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" data-id="cm54zmd880001ncue0joacr5b" data-title="21天学通C++学习笔记" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C++</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-QT" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/12/05/QT/" class="article-date">
  <time class="dt-published" datetime="2024-12-04T16:08:37.000Z" itemprop="datePublished">2024-12-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/12/05/QT/">QT</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="知识点1：-Qt概述"><a href="#知识点1：-Qt概述" class="headerlink" title="知识点1： Qt概述"></a>知识点1： Qt概述</h1><p><strong>1.概念</strong></p>
<p>Qt是一个跨平台的C++图形用户界面应用程序框架。</p>
<p>常见GUI:</p>
<pre><code>Qt: 支持多平台开发；支持CSS；面向对象特性突出；发展趋势良好。

MFC: 仅在windows平台开发；程序运行效率高；库安全性好
</code></pre>
<p><strong>2.支持平台</strong></p>
<pre><code>unix/linux

macos

windows

嵌入式平台
</code></pre>
<p><strong>3.优点</strong></p>
<ul>
<li>跨平台，几乎支持所有平台</li>
<li>接口简单，容易上手，</li>
<li>一定程度上简化了内存回收机制</li>
<li>开发效率高</li>
<li>有很好的社区氛围</li>
<li>可以进行嵌入式开发</li>
</ul>
<h1 id="知识点2：了解QtCreator"><a href="#知识点2：了解QtCreator" class="headerlink" title="知识点2：了解QtCreator"></a>知识点2：了解QtCreator</h1><p><strong>1.Qt和QtCreator的区别</strong></p>
<pre><code>Qt:通俗来说，开发工具包。

QtCreator:集成的编译器，Qt的桌面环境。
</code></pre>
<p><strong>2.QtCreator主界面：</strong></p>
<ul>
<li>欢迎选项：<ul>
<li>工程：创建工程 + 工程打开</li>
<li>示例：demo程序，下载运行研读程序</li>
<li>教程：需要连接外网查看</li>
</ul>
</li>
<li>编辑选项：<ul>
<li>编辑项目文件</li>
</ul>
</li>
<li>设计选项：<ul>
<li>设计ui</li>
</ul>
</li>
<li>debug选项：<ul>
<li>调试</li>
</ul>
</li>
<li>帮助选项：<ul>
<li>查看官方文档</li>
</ul>
</li>
</ul>
<p><img src="https://www.helloimg.com/i/2024/12/04/674fb9cb46a85.png"></p>
<h1 id="知识点3：创建第一个Qt项目"><a href="#知识点3：创建第一个Qt项目" class="headerlink" title="知识点3：创建第一个Qt项目"></a>知识点3：创建第一个Qt项目</h1><p><strong>1.创建项目</strong></p>
<ul>
<li>方式1：欢迎  —&gt; project —&gt; new project。</li>
<li>方式2：菜单栏 —&gt;  文件 —&gt; 新建文件或项目</li>
</ul>
<p><strong>2. 打开工程</strong></p>
<ul>
<li>方式1：欢迎  —&gt; project —&gt; open project。</li>
<li>方式2：菜单栏 —&gt;  文件 —&gt; 打开文件或项目</li>
</ul>
<p><strong>3.注意事项</strong></p>
<ol>
<li>项目名称不要有中文和特殊符号</li>
<li>项目路径不要出现中文</li>
</ol>
<h1 id="知识点4：Qt项目框架及文件介绍"><a href="#知识点4：Qt项目框架及文件介绍" class="headerlink" title="知识点4：Qt项目框架及文件介绍"></a>知识点4：Qt项目框架及文件介绍</h1><p><img src="https://www.helloimg.com/i/2024/12/04/674fc0f9058ce.png"></p>
<p><strong>QT_review.pro</strong></p>
<pre><code>工程文件，是qmake自动生成的用于生成makefile文件的配置
</code></pre>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">QT       += core gui <span class="comment">//包含的模块</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">greaterThan</span>(QT_MAJOR_VERSION, <span class="number">4</span>): QT += widgets <span class="comment">//大于QT4版本才包含此模块</span></span><br><span class="line"></span><br><span class="line">CONFIG += c+<span class="number">+11</span></span><br><span class="line"></span><br><span class="line">DEFINES += QT_DEPRECATED_WARNINGS</span><br><span class="line"> </span><br><span class="line">SOURCES += \ <span class="comment">//源文件</span></span><br><span class="line">    main.cpp \</span><br><span class="line">    widget.cpp</span><br><span class="line"></span><br><span class="line">HEADERS += \ <span class="comment">//头文件</span></span><br><span class="line">    widget.h</span><br><span class="line"></span><br><span class="line">qnx: target.path = /tmp/$$&#123;TARGET&#125;/bin</span><br><span class="line"><span class="keyword">else</span>: unix:!android: target.path = /opt/$$&#123;TARGET&#125;/bin</span><br><span class="line">!<span class="built_in">isEmpty</span>(target.path): INSTALLS += target</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>widget.h</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> WIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> WIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span> : <span class="keyword">public</span> QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Widget</span>(QWidget *parent = <span class="literal">nullptr</span>);</span><br><span class="line">    ~<span class="built_in">Widget</span>();</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// WIDGET_H</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>main.cpp</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span> <span class="comment">//Qt中的一个类对应一个头文件，类名就是头文件名</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span> <span class="comment">//Qt系统提供的标准头文件</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>; <span class="comment">//应用程序类（整个后台管理的命脉，处理应用程序的初始化和结束，事件处理调度，不管有多少个窗口，一个QApplication类就可）</span></span><br><span class="line">    Widget w; <span class="comment">//实例化对象，调用构造函数</span></span><br><span class="line">    w.<span class="built_in">show</span>(); <span class="comment">//显示图形界面</span></span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();<span class="comment">//主事件循环，在exec函数中，Qt接受并处理用户和系统的时间并且将他们传递给合适的窗口控件</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>widget.cpp</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">Widget::<span class="built_in">Widget</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QWidget</span>(parent)</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget::~<span class="built_in">Widget</span>()</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="知识点5：确定代码书写的位置"><a href="#知识点5：确定代码书写的位置" class="headerlink" title="知识点5：确定代码书写的位置"></a>知识点5：确定代码书写的位置</h1><p><strong>.pro</strong>：文件用于生成可执行文件</p>
<p><strong>main.cpp</strong>：主函数</p>
<p><strong>widget.cpp</strong>：类的函数</p>
<ul>
<li>一般情况，窗口的属性和添加控件的操作都会在类的构造函数中书写</li>
<li>优点：可以让主程序中无多余的代码，程序阅读也方便</li>
</ul>
<p><strong>widget.h</strong>：类和头文件</p>
<h1 id="知识点6：设置窗口属性"><a href="#知识点6：设置窗口属性" class="headerlink" title="知识点6：设置窗口属性"></a>知识点6：设置窗口属性</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修改窗口标题</span></span><br><span class="line">   <span class="keyword">this</span>-&gt;<span class="built_in">setWindowTitle</span>(<span class="string">&quot;第一个窗口&quot;</span>);</span><br><span class="line">   <span class="comment">//设置窗口大小，可拉伸</span></span><br><span class="line">   <span class="comment">//this-&gt;resize(800,600);</span></span><br><span class="line">   <span class="comment">//设置窗口大小，不可拉伸</span></span><br><span class="line">   <span class="keyword">this</span>-&gt;<span class="built_in">setFixedSize</span>(<span class="number">800</span>,<span class="number">600</span>);</span><br></pre></td></tr></table></figure>

<h1 id="知识点7：创建第一个按钮"><a href="#知识点7：创建第一个按钮" class="headerlink" title="知识点7：创建第一个按钮"></a>知识点7：创建第一个按钮</h1><p><strong>步骤1</strong>：包含头文件<code>#include&lt;QPushButton&gt;</code></p>
<p><strong>步骤2</strong>：调用构造函数创建按钮</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一</span></span><br><span class="line">QPushButton *btn1 = <span class="keyword">new</span> QPushButton;</span><br><span class="line"><span class="comment">//方式二，直接在创建时绑定父类</span></span><br><span class="line">QPushButton *btn = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;按钮&quot;</span>，<span class="keyword">this</span>);</span><br></pre></td></tr></table></figure>

<p><strong>步骤3</strong>：显示按钮</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//方法一，显示方式是另一个窗口显示按钮</span></span><br><span class="line">btn-&gt;<span class="built_in">show</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法2，设置按钮的父对象为窗口，这样按钮就在窗口上显示了</span></span><br><span class="line">btn-&gt;<span class="built_in">setParent</span>(<span class="keyword">this</span>);</span><br></pre></td></tr></table></figure>

<h1 id="知识点8：按钮的属性"><a href="#知识点8：按钮的属性" class="headerlink" title="知识点8：按钮的属性"></a>知识点8：按钮的属性</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置按钮内容</span></span><br><span class="line">   btn-&gt;<span class="built_in">setText</span>(<span class="string">&quot;按钮1&quot;</span>);</span><br><span class="line">   <span class="comment">//设置按钮位置</span></span><br><span class="line">   btn-&gt;<span class="built_in">move</span>(<span class="number">100</span>,<span class="number">100</span>);</span><br><span class="line">   <span class="comment">//设置按钮大小</span></span><br><span class="line">   btn-&gt;<span class="built_in">resize</span>(<span class="number">100</span>,<span class="number">50</span>);</span><br></pre></td></tr></table></figure>

<h1 id="知识点9：对象数（对象模型）"><a href="#知识点9：对象数（对象模型）" class="headerlink" title="知识点9：对象数（对象模型）"></a>知识点9：对象数（对象模型）</h1><p><strong>概念</strong>：Qt对象间的父子关系</p>
<p><strong>解决问题</strong>：在一定程度上解决了内存问题，简化了回收机制</p>
<h1 id="知识点10：信号和槽"><a href="#知识点10：信号和槽" class="headerlink" title="知识点10：信号和槽"></a>知识点10：信号和槽</h1><p><img src="https://www.helloimg.com/i/2024/12/04/674fef3e2988b.png"></p>
<p><strong>优点</strong>：松散耦合，信号发出端和接收端可以毫无关联，如果关联就用connect函数</p>
<h1 id="知识点11：connect函数的使用"><a href="#知识点11：connect函数的使用" class="headerlink" title="知识点11：connect函数的使用"></a>知识点11：connect函数的使用</h1> <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">connect</span>(sender,signal,receiver,slot);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>函数参数</strong></p>
<ol>
<li>sender：信号发出者</li>
<li>signal：信号</li>
<li>receiver：信号接收者</li>
<li>slot：接收到信号执行任务（槽函数）</li>
</ol>
<p><strong>举例</strong></p>
<pre><code>点击窗口按钮关闭窗口
</code></pre>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">QPushButton *btn = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;关闭窗口&quot;</span>,<span class="keyword">this</span>); <span class="comment">//创建按钮</span></span><br><span class="line">   btn-&gt;<span class="built_in">move</span>(<span class="number">100</span>,<span class="number">100</span>); <span class="comment">//设置按钮位置</span></span><br><span class="line">   btn-&gt;<span class="built_in">resize</span>(<span class="number">100</span>,<span class="number">100</span>); <span class="comment">//设置按钮大小</span></span><br><span class="line">   <span class="built_in">connect</span>(btn,&amp;QPushButton::clicked,<span class="keyword">this</span>,&amp;Widget::close);</span><br></pre></td></tr></table></figure>

<h1 id="知识点12：自定义信号槽"><a href="#知识点12：自定义信号槽" class="headerlink" title="知识点12：自定义信号槽"></a>知识点12：自定义信号槽</h1><p><strong>步骤1</strong>：确定场景</p>
<pre><code>交通灯绿，汽车启动
</code></pre>
<p><strong>步骤2</strong>：添加交通灯类和汽车类</p>
<p><strong>步骤3</strong>：在交通灯类中声明信号，在汽车类中声明并实现槽函数</p>
<p><strong>Lamp.h</strong>(信号：一般在signals里面写，返回值为void,参数可以存在，仅需要声明不要实现，可以重载)</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">signals:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">TurnGrenn</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<p><strong>Car.h</strong>(槽函数：一般在public slots里面写，对于一些高版本的Qt来说，也可以写道public或者全局；返回值为void,参数可以存在需要声明和实现，可以重载)</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> slots:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">Driving</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<p><strong>Car.cpp</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Car::Driving</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;启动&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>步骤4</strong>：连接</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">connect</span>(lamp,&amp;Lamp::TurnGreen,car,&amp;Car::Driving);	</span><br></pre></td></tr></table></figure>



<p><strong>步骤5</strong>：触发信号</p>
<p><strong>widget.h</strong>(声明触发信号的成员函数)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">void Observer();</span><br></pre></td></tr></table></figure>

<p><strong>widget.cpp</strong>(定义触发信号的成员函数+调用该成员函数)</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::Observer</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    emit car-&gt;<span class="built_in">Driving</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="知识点13：用信号连接信号"><a href="#知识点13：用信号连接信号" class="headerlink" title="知识点13：用信号连接信号"></a>知识点13：用信号连接信号</h1><p><strong>用按钮触发Observer来触发lamp的TurnGreen</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">connect</span>(btn,&amp;QPushButton::clicked,<span class="keyword">this</span>,&amp;Widget::Observer);</span><br><span class="line"><span class="built_in">connect</span>(lamp,&amp;Lamp::TurnGreen,car,&amp;Car::Driving);	</span><br></pre></td></tr></table></figure>

<h1 id="知识点14：重载自定义信号与槽"><a href="#知识点14：重载自定义信号与槽" class="headerlink" title="知识点14：重载自定义信号与槽"></a>知识点14：重载自定义信号与槽</h1><p><strong>步骤1</strong>：重新写信号声明（带参数）</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">TurnGreen</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">TurnGreen</span><span class="params">(QString)</span></span>;</span><br></pre></td></tr></table></figure>



<p><strong>步骤2</strong>：重新写槽函数声明及定义（带参数）</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> slots:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">Driving</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">Driving</span><span class="params">(QString str)</span></span>;</span><br></pre></td></tr></table></figure>



<p><strong>步骤3</strong>：由于函数被重载，需要使用函数指针绑定在连接</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">void</span> (Lamp::*ptr1)(QString) = &amp;Lamp::TurnGreen;</span><br><span class="line">   <span class="built_in">void</span> (Car::*ptr2)(QString) = &amp;Car::Driving;</span><br><span class="line">   <span class="built_in">connect</span>(lamp,ptr1,car,ptr2);</span><br></pre></td></tr></table></figure>

<h1 id="知识点15：lambda表达式"><a href="#知识点15：lambda表达式" class="headerlink" title="知识点15：lambda表达式"></a>知识点15：lambda表达式</h1><p><strong>概念</strong>：c++11中的lambda表达式用于定义并创建匿名的函数对象。</p>
<p><strong>语法</strong>：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[capture](parameters)<span class="keyword">mutable</span> -&gt; <span class="keyword">return</span>-type</span><br><span class="line">&#123;</span><br><span class="line">    statement</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/12/05/QT/" data-id="cm54zmd830000ncue5tap1kgi" data-title="QT" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/12/04/hello-world/" class="article-date">
  <time class="dt-published" datetime="2024-12-04T15:39:25.786Z" itemprop="datePublished">2024-12-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/12/04/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/12/04/hello-world/" data-id="cm54zmd8b0002ncue8con2hk7" data-title="Hello World" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C++</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/C/" style="font-size: 10px;">C++</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/12/">December 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/12/22/21%E5%A4%A9%E5%AD%A6%E9%80%9AC-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">21天学通C++学习笔记</a>
          </li>
        
          <li>
            <a href="/2024/12/05/QT/">QT</a>
          </li>
        
          <li>
            <a href="/2024/12/04/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>